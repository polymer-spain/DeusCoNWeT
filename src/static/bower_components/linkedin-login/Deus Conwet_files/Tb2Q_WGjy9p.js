/*!CK:3313142342!*//*1430239926,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["0S8Ws"]); }

__d("ChatSidebarSections",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={MORE_ONLINE_FRIENDS:"more_online_friends",MORE_ONLINE_COWORKERS:"more_online_coworkers",OFFLINE_USERS:"offline_users",ORDERED_LIST:"ordered_list",ORDERED_COWORKERS:"ordered_coworkers",TYPEAHEAD:"typeahead"};},null);
__d("CreditCardFormParam",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={ACCOUNT_ID:"account_id",ACCOUNT_COUNTRY_CODE:"account_country_code",APP_ID:"app_id",CARD_EXPIRATION:"exp",CARD_FBID:"cc_fbid",CARD_ID:"cc_id",CARD_TYPE:"cardType",CITY:"city",CONTEXT_ID:"context_id",COUNTRY:"country",CSC_LENGTH:"csc_length",EMAIL:"email",FIRST_NAME:"firstName",TRACKING_ID:"tracking_id",JSFAIL_SOURCE:"jsfail_source",KEYPRESS_TIMES:"kpts",LAST_NAME:"lastName",MONTH:"month",STATE:"state",STREET:"street",STREET_2:"street2",VALIDATE_ADDRESS:"validate_address",VALIDATE_NAME:"validate_name",VALIDATE_ZIP:"validate_zip",YEAR:"year",ZIP:"zip",VALIDATOR_CHECKS:"checks",CARD_NUMBER:"creditCardNumber",CSC:"csc",CARD_NUMBER_FIRST_6:"creditCardNumber_first6",CARD_NUMBER_LAST_4:"creditCardNumber_last4",CARD_NUMBER_TOKEN:"creditCardNumber_token",CSC_TOKEN:"csc_token",AUTH_LEVEL_FLAG:"auth_level",AUTH_AMOUNT:"auth_amount",AUTH_CURRENCY:"auth_currency",AUTO_EXPAND_AUTH_LEVEL_FLAG:"auto_expand_auth_level",PAYMENT_ITEM_TYPE:"payment_item_type",CREDENTIAL_ID:"credential_id"};},null);
__d("MercuryMessageSourceTags",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={CHAT:"source:chat",EMAIL:"source:email",MESSENGER:"source:messenger",MOBILE:"source:mobile"};},null);
__d("MercuryTimePassed",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={TODAY:0,WEEK_AGO:1,MONTH_AGO:2,CURRENT_YEAR:3,OTHER_YEAR:4};},null);
__d("MessagingEvent",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={DELETE:"delete",DELETE_MESSAGES:"delete_messages",DELIVER:"deliver",ERROR:"error",READ:"read",REPORT_SPAM:"report_spam",REPORT_SPAM_MESSAGES:"report_spam_messages",UNMARK_SPAM:"unmark_spam",SUBSCRIBE:"subscribe",CHANGE_MUTE_SETTINGS:"change_mute_settings",TAG:"tag",UNREAD:"unread",UNSUBSCRIBE:"unsubscribe",DELIVER_LOG:"deliver_log",MORE_THREADS:"more_threads",READ_ALL:"read_all",READ_RECEIPT:"read_receipt",DELIVERY_RECEIPT:"delivery_receipt",SENT_PUSH:"sent_push",DELIVER_FAST_PAST:"deliver_fast_path",MESSENGER_STATUS:"messenger_status",UPDATE_PINNED_THREADS:"update_pinned_threads",CHANGE_PAGE_THREAD_FLAG:"change_page_thread_flag"};},null);
__d("P2PTransferStatus",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={PENDING_SENDER_MANUAL_REVIEW:1,PENDING_SENDER_VERIFICATION:2,CANCELED_SENDER_RISK:3,PENDING_RECIPIENT_NUX:4,CANCELED_DECLINED:5,PENDING_RECIPIENT_VERIFICATION:6,PENDING_RECIPIENT_MANUAL_REVIEW:7,PENDING_RECIPIENT_PROCESSING:8,PENDING_PUSH_FAIL:9,CANCELED_RECIPIENT_RISK:10,CANCELED_SYSTEM_FAIL:11,CANCELED_EXPIRED:12,COMPLETED:13,INTERMEDIATE_PROCESSING:14,PENDING_SENDER_INITED:15,CANCELED_SAME_CARD:16,PENDING_SENDER_VERIFICATION_PROCESSING:17,PENDING_RECIPIENT_VERIFICATION_PROCESSING:18};},null);
__d("PagesMessagingConst",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={LOAD_MESSAGE_THREAD_URI:"\/ajax\/pages\/messages\/load_message_thread.php",ASYNC_ENDPOINT:"\/ajax\/messaging\/async.php"};},null);
__d("PhotoResizeModeConst",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={CONTAIN:"s",COVER:"p"};},null);
__d("TreeMap",["Map","nullthrows"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();'use strict';function i(w,x,y){this.key=w;this.value=x;this.time=y;}function j(w){this.$TreeMap0=function(x,y){var z=w(x,y);return z!==0?z:x.time-y.time;};this.$TreeMap1=new g();this.$TreeMap2=null;this.$TreeMap3=0;this.size=this.$TreeMap1.size;}j.prototype.clear=function(){this.$TreeMap1=new g();this.$TreeMap2=null;this.size=this.$TreeMap1.size;};j.prototype.has=function(w){return this.$TreeMap1.has(w);};j.prototype.set=function(w,x){if(this.has(w))this["delete"](w);var y=new i(w,x,this.$TreeMap3++);this.$TreeMap1.set(w,y);this.$TreeMap2=q(this.$TreeMap2,y,this.$TreeMap0);this.size=this.$TreeMap1.size;return this;};j.prototype.get=function(w){return this.has(w)?this.$TreeMap1.get(w).value:(void 0);};j.prototype["delete"]=function(w){if(!this.has(w))return false;var x=this.$TreeMap1.get(w);this.$TreeMap2=r(this.$TreeMap2,x,this.$TreeMap0);this.$TreeMap1["delete"](w);this.size=this.$TreeMap1.size;return true;};j.prototype.keys=function(){var w=[];v(this.$TreeMap2,w,function(x){return x.key;});return w;};j.prototype.values=function(){var w=[];v(this.$TreeMap2,w,function(x){return x.value;});return w;};j.prototype.entries=function(){var w=[];v(this.$TreeMap2,w,function(x){return {key:x.key,value:x.value};});return w;};j.prototype.range=function(w,x){var y=[],z=null;if(w)z=new i(w.key,w.value,-1);var aa=null;if(x)aa=new i(x.key,x.value,this.$TreeMap3);v(this.$TreeMap2,y,function(ba){return {key:ba.key,value:ba.value};},this.$TreeMap0,z,aa);return y;};j.prototype.min=function(){if(!this.$TreeMap2)return undefined;var w=s(h(this.$TreeMap2)),x=w.key,y=w.value;return {key:x,value:y};};j.prototype.max=function(){if(!this.$TreeMap2)return undefined;var w=t(h(this.$TreeMap2)),x=w.key,y=w.value;return {key:x,value:y};};j.prototype.__testRoot=function(){};function k(w){if(!w)return w;p(w);if(w.balanceFactor<-1){if(w.right&&w.right.balanceFactor<=0){return l(w);}else return m(w);}else if(w.balanceFactor>1){if(w.left&&w.left.balanceFactor>=0){return n(w);}else return o(w);}else return w;}function l(w){var x=w,y=h(x.right),z=y.left;x.right=z;p(x);h(y).left=x;p(y);return y;}function m(w){var x=w,y=h(x.right),z=h(y.left),aa=z.left,ba=z.right;x.right=aa;p(x);y.left=ba;p(y);z=h(z);z.left=x;z.right=y;p(z);return z;}function n(w){var x=w,y=h(x.left),z=y.right;x.left=z;p(x);y.right=x;p(y);return y;}function o(w){var x=w,y=h(x.left),z=h(y.right),aa=z.left,ba=z.right;y.right=aa;p(y);x.left=ba;p(x);z.left=y;z.right=x;p(z);return z;}function p(w){var x=w.left?w.left.height:-1,y=w.right?w.right.height:-1;w.height=Math.max(x,y)+1;w.balanceFactor=x-y;}function q(w,x,y){if(w==null)return k(x);var z=y(x,w);if(z<0){w.left=q(w.left,x,y);return k(w);}else{w.right=q(w.right,x,y);return k(w);}}function r(w,x,y){if(w==null)return null;if(w===x)if(w.left&&w.right){var z=t(w.left);w.left=u(w.left);z.left=w.left;z.right=w.right;return k(z);}else if(w.left){return k(w.left);}else if(w.right){return k(w.right);}else return null;var aa=y(x,w);if(aa<0){w.left=r(w.left,x,y);return k(w);}else{w.right=r(w.right,x,y);return k(w);}}function s(w){while(w.left)w=w.left;return w;}function t(w){while(w.right)w=w.right;return w;}function u(w){if(!w)return null;if(w.right==null)return k(w.left||null);w.right=u(w.right);return k(w);}function v(w,x,y,z,aa,ba){if(w==null)return;var ca=!z||!aa||z(w,aa)>=0,da=!z||!ba||z(w,ba)<=0;if(ca)v(w.left,x,y,z,aa,ba);if(ca&&da)x.push(y(w));if(da)v(w.right,x,y,z,aa,ba);}e.exports=j;},null);
__d("Cache",["DateConsts","Map","TreeMap"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();'use strict';function j(){this.$Cache0=new h();}j.prototype.has=function(k){return this.$Cache0.has(k);};j.prototype.get=function(k,l){var m=this.__getRaw(k);if(!m)return l;return m.$Cache1;};j.prototype.getAll=function(k,l){var m=new h();k.forEach(function(n){return m.set(n,this.get(n,l));}.bind(this));return m;};j.prototype["delete"]=function(k){var l=this.__getRaw(k);if(l&&l.$Cache2)clearTimeout(l.$Cache2);return this.$Cache0["delete"](k);};j.prototype.clear=function(){this.$Cache0.forEach(function(k){if(k&&k.$Cache2)clearTimeout(k.$Cache2);});this.$Cache0.clear();};j.prototype.set=function(k,l,m,n){if(!this.shouldUpdate(k,m))return false;var o=this.__getRaw(k);if(!o)o=this.__getNewRawObject();delete o.$Cache1;delete o.$Cache3;if(o.$Cache2)clearTimeout(o.$Cache2);delete o.$Cache2;o.$Cache1=l;if(m!=null)o.$Cache3=m;if(n!=null&&n>=0)o.$Cache2=setTimeout(this["delete"].bind(this,k),n*g.MS_PER_SEC*g.SEC_PER_MIN);this.__setRaw(k,o);return true;};j.prototype.shouldUpdate=function(k,l){var m=this.__getRaw(k);return (m==null||m.$Cache3==null||l==null||l>m.$Cache3);};j.prototype.size=function(){return this.$Cache0.size;};j.prototype.__getRaw=function(k){return this.$Cache0.get(k);};j.prototype.__setRaw=function(k,l){this.$Cache0.set(k,l);};j.prototype.__getNewRawObject=function(){return {$Cache1:null,$Cache2:null,$Cache3:null,$Cache4:null,$Cache5:null};};j.prototype.__keys=function(){return this.$Cache0.keys();};e.exports=j;},null);
__d("legacy:ChatTypeaheadBehavior",["ChatTypeaheadBehavior"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();if(!a.TypeaheadBehaviors)a.TypeaheadBehaviors={};a.TypeaheadBehaviors.chatTypeahead=function(h){h.enableBehavior(g);};},3);
__d("SplitImage.react",["React","Image.react","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k=g.createClass({displayName:"SplitImage",render:function(){var l=this.props.size;return (g.createElement("div",g.__spread({},this.props,{className:j(this.props.className,"_55lt"),style:Object.assign({},(this.props.style||{}),{width:l,height:l})}),this.renderImages()));},renderImages:function(){if(!this.props.srcs)return null;var l=this.props.srcs,m=Array.isArray(l);if(!m||l.length==1)return this.renderOne(m?l[0]:l);return l.length==2?this.renderTwo(l):this.renderThree(l);},renderOne:function(l){return (g.createElement(h,{src:l,width:this.props.size,height:this.props.size,alt:""}));},renderTwo:function(l){var m=this.props.size,n=Math.floor(m/2),o=-Math.floor(n/2),p=(("_55lu")+(this.props.border?' '+"_57xo":''));return (g.createElement("div",null,g.createElement("div",{className:"_55lu",style:{width:n}},g.createElement(h,{src:l[0],width:m,height:m,style:{marginLeft:o}})),g.createElement("div",{className:p,style:{width:n}},g.createElement(h,{src:l[1],width:m,height:m,style:{marginLeft:o}}))));},renderThree:function(l){var m=this.props.size,n=Math.floor(m/3*2),o=-Math.floor((m-n)/2),p=Math.floor(m/2),q=m-n,r=-Math.floor((p-q)/2),s=(("_55lu")+(this.props.border?' '+"_57pl":'')),t=(("_55lu")+(this.props.border?' '+"_57pm":''));return (g.createElement("div",null,g.createElement("div",{className:s,style:{width:n}},g.createElement(h,{src:l[0],width:m,height:m,style:{marginLeft:o}})),g.createElement("div",{className:t,style:{width:q,height:p}},g.createElement(h,{src:l[1],width:p,height:p,style:{marginLeft:r}})),g.createElement("div",{className:"_55lu",style:{width:q,height:p}},g.createElement(h,{src:l[2],width:p,height:p,style:{marginLeft:r}}))));}});e.exports=k;},null);
__d("ChatSidebarHeader.react",["React","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j=g.createClass({displayName:"ReactChatSidebarHeader",render:function(){return (g.createElement("div",g.__spread({},this.props,{className:i(this.props.className,"_55ob")}),g.createElement("div",{className:"_55oc"},this.props.children)));}});e.exports=j;},null);
__d("FBOverlayBase.react",["React"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h=g.createClass({displayName:"FBOverlayBase",render:function(){return g.Children.only(this.props.children);}});e.exports=h;},null);
__d("FBOverlayElement.react",["React","cloneWithProps","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k=g,l=k.PropTypes,m={horizontal:{left:"_32rg",right:"_32rh",fit:j("_32rg","_32rh")},vertical:{top:"_32ri",bottom:"_32rj",fit:j("_32ri","_32rj")}},n=g.createClass({displayName:"FBOverlayElement",propTypes:{horizontal:l.oneOf(['left','right','fit']),vertical:l.oneOf(['top','bottom','fit'])},getDefaultProps:function(){return {horizontal:'fit',vertical:'fit'};},render:function(){var o=j("_32rk",m.horizontal[this.props.horizontal],m.vertical[this.props.vertical]);return h(g.Children.only(this.props.children),{className:o});}});e.exports=n;},null);
__d("FBOverlayContainer.react",["FBOverlayBase.react","FBOverlayElement.react","React","cx","invariant","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();var m=i.createClass({displayName:"FBOverlayContainer",propTypes:{children:function(n,o){var p=n[o],q=0;i.Children.forEach(p,function(r){if(r===null||r===(void 0))return;switch(r.type){case g:q++;break;case h:break;default:k(false);}});k(q===1);}},render:function(){return (i.createElement("div",i.__spread({},this.props,{className:l(this.props.className,"_23n-")}),this.props.children));}});e.exports=m;},null);
__d("FBTilesMapZoomOverlay.react",["Image.react","React","ReactComponentWithPureRenderMixin","XUIButton.react","cx","ix"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();'use strict';var m=h,n=m.PropTypes,o=h.createElement(g,{src:l('/images/ads/common/zoom_icon/icon_plus.png')}),p=h.createElement(g,{src:l('/images/ads/common/zoom_icon/icon_minus.png')}),q=h.createClass({displayName:"FBTilesMapZoomOverlay",mixins:[i],propTypes:{onZoomIn:n.func,onZoomOut:n.func},render:function(){var r=this.props,s=r.onZoomIn,t=r.onZoomOut,u=(function(v,w){var x={},y=Object.prototype.hasOwnProperty;if(v==null)throw new TypeError();for(var z in v)if(y.call(v,z)&&!y.call(w,z))x[z]=v[z];return x;})(r,{onZoomIn:1,onZoomOut:1});return (h.createElement("div",h.__spread({},u),h.createElement("div",null,h.createElement(j,{disabled:s==null,image:o,onClick:s})),h.createElement("div",null,h.createElement(j,{className:"_3d8x",disabled:t==null,image:p,onClick:t}))));}});e.exports=q;},null);
__d("LeafletAttributionLogo.react",["React","TilesMapConfig","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();'use strict';var k=g.createClass({displayName:"LeafletAttributionLogo",render:function(){var l=h.LOGO.url;return (g.createElement("div",{className:j(this.props.className,"_11kj"),style:{backgroundImage:("url("+l+")"),height:h.LOGO.height+'px',width:h.LOGO.width+'px'}}));}});e.exports=k;},null);
__d("SubscriptionList",["invariant"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();function h(i,j){"use strict";this.$SubscriptionList0=[];this.$SubscriptionList1=i;this.$SubscriptionList2=j;}h.prototype.$SubscriptionList3=function(i){"use strict";var j=this.$SubscriptionList0.indexOf(i);g(j!==-1);this.$SubscriptionList0.splice(j,1);if(this.$SubscriptionList0.length===0)this.$SubscriptionList2.call();};h.prototype.add=function(i){"use strict";var j={callback:i};this.$SubscriptionList0.push(j);if(this.$SubscriptionList0.length===1)this.$SubscriptionList1.call();return {remove:this.$SubscriptionList3.bind(this,j)};};h.prototype.getCallbacks=function(){"use strict";return this.$SubscriptionList0.map(function(i){return i.callback;});};h.prototype.fireCallbacks=function(){"use strict";for(var i=[],j=0,k=arguments.length;j<k;j++)i.push(arguments[j]);this.$SubscriptionList0.forEach(function(l){l.callback.apply(null,i);});};e.exports=h;},null);
__d("ElementResizeEmitter",["DOM","EventListener","SubscriptionList","cx","invariant","requestAnimationFrame"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();'use strict';var m=!!navigator.userAgent.match(/Trident/);for(var n in i)if(i.hasOwnProperty(n))p[n]=i[n];var o=i===null?null:i.prototype;p.prototype=Object.create(o);p.prototype.constructor=p;p.__superConstructor__=i;function p(q){k(getComputedStyle(q).position!=='static');this.$ElementResizeEmitter0=q;this.$ElementResizeEmitter1=false;i.call(this,this.$ElementResizeEmitter2.bind(this),this.$ElementResizeEmitter3.bind(this));}p.prototype.$ElementResizeEmitter2=function(){if(this.$ElementResizeEmitter0.attachEvent){var q=this.$ElementResizeEmitter4.bind(this);this.$ElementResizeEmitter0.attachEvent('onresize',q);this.$ElementResizeEmitter5={remove:function(){this.$ElementResizeEmitter0.detachEvent('onresize',q);}.bind(this)};return;}var r=document.createElement('object');r.className="_3dtr";r.onload=this.$ElementResizeEmitter6.bind(this);r.type='text/html';if(m)this.$ElementResizeEmitter0.appendChild(r);r.data='about:blank';if(!m)this.$ElementResizeEmitter0.appendChild(r);this.$ElementResizeEmitter7=r;};p.prototype.$ElementResizeEmitter3=function(){if(this.$ElementResizeEmitter5!=(void 0))this.$ElementResizeEmitter5.remove();if(this.$ElementResizeEmitter7){g.remove(this.$ElementResizeEmitter7);this.$ElementResizeEmitter7=(void 0);}};p.prototype.$ElementResizeEmitter6=function(){this.$ElementResizeEmitter4();this.$ElementResizeEmitter5=h.listen(this.$ElementResizeEmitter7.contentDocument.defaultView,'resize',this.$ElementResizeEmitter4.bind(this));};p.prototype.$ElementResizeEmitter4=function(){if(this.$ElementResizeEmitter1)return;this.$ElementResizeEmitter1=true;l(function(){this.fireCallbacks();this.$ElementResizeEmitter1=false;}.bind(this));};e.exports=p;},null);
__d("LeafletMapLayer.react",["React","invariant","onlyChild"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();'use strict';var j=g,k=j.PropTypes,l=g.createClass({displayName:"LeafletMapLayer",propTypes:{onAddLayer:k.func.isRequired,onRemoveLayer:k.func.isRequired},componentDidMount:function(){var m=i(this.props.children);h(m.type.mutate);h(m.type.toLayer);this._createLayer(m);this._prevChild=m;},componentDidUpdate:function(m,n){var o=i(this.props.children);if(!this._mutate(o)){this.props.onRemoveLayer(this._layer);this._createLayer(o);}this._prevChild=o;},componentWillUnmount:function(){this.props.onRemoveLayer(this._layer);this._layer=null;},render:function(){return null;},_createLayer:function(m){this._layer=m.type.toLayer(m.props);this.props.onAddLayer(this._layer);},_mutate:function(m){if(m.type!==this._prevChild.type)return false;if(m.props===this._prevChild.props)return true;return m.type.mutate(this._layer,m.props,this._prevChild.props);}});e.exports=l;},null);
__d("nearlyEqualNumbers",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();function g(h,i){if(h===i)return true;var j=Math.abs(h-i);if(j<Number.EPSILON)return true;var k=Math.abs(h),l=Math.abs(i);return j/(k+l)<Number.EPSILON;}e.exports=g;},null);
__d("GeoCoordinates",["ImmutableObject","nearlyEqualNumbers"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();'use strict';for(var i in g)if(g.hasOwnProperty(i))k[i]=g[i];var j=g===null?null:g.prototype;k.prototype=Object.create(j);k.prototype.constructor=k;k.__superConstructor__=g;function k(l,m){g.call(this,{latitude:l,longitude:m});}k.prototype.nearlyEquals=function(l){return (h(this.latitude,l.latitude)&&h(this.longitude,l.longitude));};e.exports=k;},null);
__d("LeafletView",["GeoCoordinates","ImmutableObject","invariant","nearlyEqualNumbers"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();'use strict';for(var k in h)if(h.hasOwnProperty(k))m[k]=h[k];var l=h===null?null:h.prototype;m.prototype=Object.create(l);m.prototype.constructor=m;m.__superConstructor__=h;function m(n){i(n);i(n.center instanceof g);i(typeof n.zoom==='number');h.call(this,n);}m.prototype.nearlyEquals=function(n){return (this.center.nearlyEquals(n.center)&&j(this.zoom,n.zoom));};m.prototype.setZoom=function(n){return new m({center:this.center,zoom:n});};m.DEFAULT=new m({center:new g(0,0),zoom:0});e.exports=m;},null);
__d("LeafletUtils",["GeoCoordinates","leaflet","LeafletView","TilesMapConfig","invariant","mod"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();'use strict';var m=j.OSM_RECTS_RAW.map(function(v){return h.latLngBounds([v[2],v[1]],[v[0],v[3]]);}),n=h.CRS.EPSG3857,o=360,p=o/2,q=h.LatLng.DEG_TO_RAD,r=h.LatLng.RAD_TO_DEG,s=h.Projection.Mercator.R_MAJOR;function t(v){var w=v.zoomRange;k(Array.isArray(w)&&w.length===2);return w;}var u={fromLatLng:function(v){return new g(v.lat,v.lng);},normalizedBounds:function(v,w){var x=u.wrapLongitude(v.lng);w=h.latLng(w.lat,w.lng+x-v.lng);v=h.latLng(v.lat,x);return h.latLngBounds(v,w);},fitBounds:function(v,w,x){var y=x.crs||n,z=t(x),aa=u.getBoundsZoom(v,w,{zoomRange:z,crs:y});if(aa===null)aa=z[0];var ba=y.latLngToPoint(v.getSouthWest(),aa),ca=y.latLngToPoint(v.getNorthEast(),aa),da=u.fromLatLng(y.pointToLatLng(ba.add(ca).divideBy(2),aa));return new i({center:da,zoom:aa});},getBoundsZoom:function(v,w,x){var y=x.crs||n,z=t(x),aa=h.point(w.width,w.height),ba=v.getNorthWest(),ca=v.getSouthEast(),da=z[0]-1;for(;da<=z[1];++da){var ea=y.latLngToPoint(ca,da+1),fa=y.latLngToPoint(ba,da+1),ga=ea.subtract(fa).floor();if(!aa.contains(ga))break;}if(da<z[0])return null;if(da<=z[1])return da;return da-1;},getViewBounds:function(v,w,x){x=x||n;var y=w.width/2,z=w.height/2,aa=u.toLatLng(v.center),ba=x.latLngToPoint(aa,v.zoom),ca=x.pointToLatLng(h.point(ba.x-y,ba.y+z),v.zoom),da=x.pointToLatLng(h.point(ba.x+y,ba.y-z),v.zoom);return u.normalizedBounds(ca,da);},isViewInBounds:function(v,w,x,y){var z=u.getViewBounds(v,w,y),aa=u.shiftBoundsLng(z,o);return x.some(function(ba){return ba.contains(z)||ba.contains(aa);});},projectCircle:function(v,w,x){x=x||n;var y=v.center.latitude,z=v.center.longitude,aa=(v.radius/s)*r,ba=x.latLngToPoint(h.latLng(y+aa,z),w),ca=x.latLngToPoint(h.latLng(y-aa,z),w),da=ba.add(ca).divideBy(2),ea=x.pointToLatLng(da,w).lat,fa=y*q,ga=ea*q,ha=Math.acos((Math.cos(aa*q)-Math.sin(fa)*Math.sin(ga))/(Math.cos(fa)*Math.cos(ga)))*r,ia=isNaN(ha)?0:Math.max(Math.round(da.x-x.latLngToPoint(h.latLng(ea,z-ha),w).x),1),ja=Math.max(Math.round(da.y-ba.y),1);return {center:da,radius:h.point(ia,ja)};},latLngWithDistance:function(v,w,x){var y=v.lat*q,z=v.lng*q,aa=x/s,ba=Math.asin(Math.sin(y)*Math.cos(aa)+Math.cos(y)*Math.sin(aa)*Math.cos(w)),ca=z+Math.atan2(Math.sin(w)*Math.sin(aa),Math.cos(y)-Math.sin(y)*Math.sin(ba));return new h.LatLng(ba*r,ca*r);},circleBounds:function(v,w){return h.latLngBounds([u.latLngWithDistance(v,0,w),u.latLngWithDistance(v,90*q,w),u.latLngWithDistance(v,180*q,w),u.latLngWithDistance(v,270*q,w)]);},shiftBoundsLng:function(v,w){return h.latLngBounds([v.getSouthWest().lat,v.getSouthWest().lng+w],[v.getNorthEast().lat,v.getNorthEast().lng+w]);},shouldShowAttribution:function(v,w,x){if(Math.min(w.height,w.width)<250)return false;if(v.zoom<j.OSM_ZOOM_THRESHOLD)return true;return !u.isViewInBounds(v,w,m,x);},toLatLng:function(v){return new h.LatLng(v.latitude,v.longitude);},wrapLongitude:function(v){return l(v+p,o)-p;}};e.exports=u;},null);
__d("objHasOwnProperty",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();'use strict';function g(h,i){return Object.prototype.hasOwnProperty.call(h,i);}e.exports=g;},null);
__d("forEachDifference",["forEachObject","objHasOwnProperty"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();'use strict';function i(j,k,l){g(j,function(m,n){if(h(k,n)){l.onBoth&&l.onBoth(m,k[n],n);}else l.onLeft&&l.onLeft(m,n);});g(k,function(m,n){if(!h(j,n))l.onRight&&l.onRight(m,n);});}e.exports=i;},null);
__d("LeafletMap.react",["ElementResizeEmitter","leaflet","LeafletMapLayer.react","LeafletUtils","LeafletView","React","Set","debounceCore","emptyFunction","forEachDifference","invariant","keyMirror"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){b.__markCompiled&&b.__markCompiled();'use strict';var s=l,t=s.PropTypes,u=100,v=10,w=new m(['dragging','touchZoom','doubleClickZoom','scrollWheelZoom','boxZoom','keyboard','tab']),x=t.instanceOf(k),y=r({STILL:undefined,MOVING:undefined,MOVING_STALE:undefined});function z(ca){var da=ca.getCenter();return new k({center:j.fromLatLng(da),zoom:ca.getZoom()});}function aa(ca,da){return {center:[ca.center.latitude,ca.center.longitude],zoom:ca.zoom,attributionControl:false,layers:da,trackResize:false};}var ba=l.createClass({displayName:"LeafletMap",propTypes:{className:t.string,defaultOptions:t.object,defaultView:x,eventHandlers:t.object,onSizeSettled:t.func,onViewChange:t.func,options:t.object,style:t.object,view:function(ca,da,ea){var fa=x(ca,da,ea);if(!ca[da]||fa)return fa;if(ca[da]&&ca.defaultView)return new Error('You provided both `view` and `defaultView` props to LeafletMap. '+'`defaultView` will be discarded.');if(ca.onViewChange)return;return new Error('You provided a `view` prop to LeafletMap without an '+'`onViewChange` handler. This will prevent the user to move the '+'view. If the view should be movable use `defaultView`. Otherwise, '+'set `onViewChange`.');}},componentDidMount:function(){var ca=Object.assign({},this.props.defaultOptions,this.props.options,aa(this._getView(),this._getInitLayers()));this._map=h.map(l.findDOMNode(this),ca);this._initLayers=null;this._setViewFromPropDebounced=n(this._setViewFromProp,u);this._updateEventHandlers({});this._map.on('movestart',this._onMoveStart);this._map.on('moveend',this._onMoveEnd);this._internalViewState=y.STILL;this._warnings=new m();this._setView=n(function(da,ea){if(this._map)this._map.setView(da,ea);}.bind(this),v);this._resizeListener=(new g(l.findDOMNode(this))).add(function(){this._map.invalidateSize();this.props.onSizeSettled(this._map.getSize());}.bind(this));},componentDidUpdate:function(ca,da){this._updateEventHandlers(ca.eventHandlers);this._updateOptions(ca.options);this._updateView(ca.view);},componentWillUnmount:function(){this._resizeListener.remove();this._map.remove();this._map=null;},getDefaultProps:function(){return {eventHandlers:{},onSizeSettled:o,options:{}};},render:function(){var ca=l.Children.map(this.props.children,function(da,ea){if(!da)return da;return (l.createElement(i,{key:da.key,onAddLayer:this._onAddLayer,onRemoveLayer:this._onRemoveLayer},da));}.bind(this));return (l.createElement("div",{className:this.props.className,style:Object.assign({display:'relative'},this.props.style)},ca));},_getInitLayers:function(){if(!this._initLayers)this._initLayers=[];return this._initLayers;},_getView:function(){if(this.props.view)return this.props.view;if(this.props.defaultView)return this.props.defaultView;return k.DEFAULT;},_onAddLayer:function(ca){if(this._map){this._map.addLayer(ca);return;}this._getInitLayers().push(ca);},_onMoveEnd:function(ca){if(!this._map)return;var da=z(this._map),ea=this._internalViewState;this._internalViewState=y.STILL;if(this.props.view){if(ea===y.MOVING_STALE){this._setViewFromProp();return;}if(da.nearlyEquals(this.props.view))return;this._setViewFromPropDebounced();}if(!this.props.onViewChange)return;this.props.onViewChange(da);},_onMoveStart:function(){if(!this._map)return;if(this._internalViewState===y.STILL)this._internalViewState=y.MOVING;},_onRemoveLayer:function(ca){q(this._map!==undefined);if(this._map!==null)this._map.removeLayer(ca);},_setOption:function(ca,da){if(!w.has(ca))throw new Error('cannot change Leaflet option `'+ca+'` during component lifetime');this._map[ca][da?'enable':'disable']();},_setViewFromProp:function(){this._setViewFromPropDebounced.reset();if(this._internalViewState===y.MOVING)this._internalViewState=y.MOVING_STALE;var ca=this.props.view;if(ca.nearlyEquals(z(this._map)))return;this._setView([ca.center.latitude,ca.center.longitude],ca.zoom);},_updateEventHandlers:function(ca){p(this.props.eventHandlers,ca,{onLeft:function(da,ea){this._map.on(ea,da);}.bind(this),onRight:function(da,ea){this._map.off(ea,da);}.bind(this),onBoth:function(da,ea,fa){if(da!==ea){this._map.off(fa,ea);this._map.on(fa,da);}}.bind(this)});},_updateOptions:function(ca){if(this.props.options===ca)return;p(this.props.options,ca,{onLeft:function(da,ea){return this._setOption(ea,da);}.bind(this),onRight:function(da,ea){throw new Error('reverting Leaflet option `'+ea+'` back to default is not supported');},onBoth:function(da,ea,fa){if(da!==ea)this._setOption(fa,da);}.bind(this)});},_updateView:function(ca){var da=this.props.view;if(!da||!this._map||da===ca||da.nearlyEquals(ca))return;this._setViewFromProp();},_warnForDefaultProp:function(ca,da){if(ca[da]!==this.props[da]&&!this._warnings.has(da))this._warnings.add(da);}});e.exports=ba;},null);
__d("LeafletTileLayer.react",["React","leaflet","areEqual"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j=g,k=j.PropTypes,l=g.createClass({displayName:"LeafletMapTileLayer",propTypes:{options:k.object,urlTemplate:k.string.isRequired},statics:{mutate:function(m,n,o){var p=o.options||{},q=p.opacity,r=p.zIndex,s=(function(x,y){var z={},aa=Object.prototype.hasOwnProperty;if(x==null)throw new TypeError();for(var ba in x)if(aa.call(x,ba)&&!aa.call(y,ba))z[ba]=x[ba];return z;})(p,{opacity:1,zIndex:1}),t=n.options||{},u=t.opacity,v=t.zIndex,w=(function(x,y){var z={},aa=Object.prototype.hasOwnProperty;if(x==null)throw new TypeError();for(var ba in x)if(aa.call(x,ba)&&!aa.call(y,ba))z[ba]=x[ba];return z;})(t,{opacity:1,zIndex:1});if(!i(w,s))return false;if(u!==q)m.setOpacity(u);if(v!==r)m.setZIndex(v);if(n.urlTemplate!==o.urlTemplate)m.setUrl(n.urlTemplate);return true;},toLayer:function(m){return h.tileLayer(m.urlTemplate,m.options);}},render:function(){return null;}});e.exports=l;},null);
__d("TilesMapUtils",["CurrentLocale","GeoCoordinates","GeoRectangle","LeafletView","TilesMapConfig"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();'use strict';var l={DEFAULT_VIEW:new j({center:new h(0,0),zoom:k.ZOOM_RANGE.MIN}),getTileURLTemplate:function(m){if(!m)m=g.get();return k.TILE_URL_TEMPLATE+'&language='+m;},getOSMRects:function(){return l.getOSMRectsFromRaw(k.OSM_RECTS_RAW);},getOSMRectsFromRaw:function(m){return m.map(function(n){return new i(n[0],n[1],n[2],n[3]);});}};e.exports=l;},null);
__d("FBTilesMap.react",["FBOverlayBase.react","FBOverlayContainer.react","FBOverlayElement.react","FBTilesMapZoomOverlay.react","LeafletAttributionLogo.react","LeafletMap.react","LeafletTileLayer.react","LeafletUtils","React","TilesMapConfig","TilesMapUtils","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){b.__markCompiled&&b.__markCompiled();'use strict';var s=o,t=s.PropTypes,u=q.getTileURLTemplate(),v={maxZoom:p.ZOOM_RANGE.MAX,minZoom:p.ZOOM_RANGE.MIN};function w(ba,ca){if(ca!=null&&ca.type===i)return ba?ca:undefined;return ba?undefined:ca;}var x=function(ba){return o.Children.map(ba,w.bind(undefined,false));},y=function(ba){return o.Children.map(ba,w.bind(undefined,true));};function z(ba){return {overlays:y(ba),others:x(ba)};}var aa=o.createClass({displayName:"FBTilesMap",propTypes:{className:t.string,showZoomControls:t.bool,style:t.object},getInitialState:function(){return {size:undefined};},render:function(){var ba=this.props,ca=ba.children,da=ba.className,ea=ba.style,fa=(function(ja,ka){var la={},ma=Object.prototype.hasOwnProperty;if(ja==null)throw new TypeError();for(var na in ja)if(ma.call(ja,na)&&!ma.call(ka,na))la[na]=ja[na];return la;})(ba,{children:1,className:1,style:1}),ga=z(ca),ha=ga.others,ia=ga.overlays;return (o.createElement(h,{className:da,style:ea},o.createElement(g,null,this._renderMap(ha,fa)),ia,this._renderAttribution(),this._renderZoomControls()));},_onSizeSettled:function(ba){this.setState({size:ba});if(this.props.onSizeSettled!=null)this.props.onSizeSettled(ba);},_onZoomIn:function(){var ba=this.props.view;if(ba==null||this.props.onViewChange==null)return;if(ba.zoom<p.ZOOM_RANGE.MAX)this.props.onViewChange(ba.setZoom(ba.zoom+1));},_onZoomOut:function(){var ba=this.props.view;if(ba==null||this.props.onViewChange==null)return;if(ba.zoom>p.ZOOM_RANGE.MIN)this.props.onViewChange(ba.setZoom(ba.zoom-1));},_renderAttribution:function(){if(this.state.size!=null&&!n.shouldShowAttribution(this.props.view,{width:this.state.size.x,height:this.state.size.y}))return;return (o.createElement(i,{vertical:"bottom",horizontal:"left"},o.createElement(k,null)));},_renderMap:function(ba,ca){var da=Object.assign({},ca.defaultOptions,{zoomControl:false});return (o.createElement(l,o.__spread({},ca,{className:"_5db7",defaultOptions:da,onSizeSettled:this._onSizeSettled}),o.createElement(m,{options:v,urlTemplate:u}),ba));},_renderZoomControls:function(){if(this.props.view==null||this.props.onViewChange==null||!this.props.showZoomControls)return;var ba=this.props.view.zoom<v.maxZoom?this._onZoomIn:undefined,ca=this.props.view.zoom>v.minZoom?this._onZoomOut:undefined;return (o.createElement(i,{vertical:"top",horizontal:"left"},o.createElement(j,{className:"_3-8j",onZoomIn:ba,onZoomOut:ca})));}});e.exports=aa;},null);
__d("XUINotice.react",["React","Image.react","XUICloseButton.react","cx","fbt","ix","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();'use strict';var n=g,o=n.PropTypes,p={notify:{altText:k._("Notice"),className:null,iconSrc:l('/images/deprecated/glyphs/flat/info-flat_m.png')},success:{altText:k._("Success"),className:"_3qh4",iconSrc:l('/images/deprecated/glyphs/flat/checkmark_white_m.png')},warn:{altText:k._("Warning"),className:"_585o",iconSrc:l('/images/deprecated/glyphs/flat/error-flat_m.png')}},q=g.createClass({displayName:"XUINotice",propTypes:{onDismiss:o.func,use:o.oneOf(Object.keys(p)),size:o.oneOf(['medium','small'])},getDefaultProps:function(){return {use:'notify',size:'medium'};},render:function(){var r=this.props,s=r.children,t=r.className,u=r.onDismiss,v=r.use,w=(function(aa,ba){var ca={},da=Object.prototype.hasOwnProperty;if(aa==null)throw new TypeError();for(var ea in aa)if(da.call(aa,ea)&&!da.call(ba,ea))ca[ea]=aa[ea];return ca;})(r,{children:1,className:1,onDismiss:1,use:1}),x=p[v];t=m("_585n",x.className,t);var y=null;if(u)y=g.createElement(i,{className:"_585q",href:"#",onClick:u});var z=(("_585r")+(u?' '+"_2i-a":'')+(this.props.size==='medium'?' '+"_50f4":'')+(this.props.size==='small'?' '+"_50f3":''));return (g.createElement("div",g.__spread({},w,{className:t}),g.createElement(h,{alt:x.altText,className:"_585p",src:x.iconSrc}),y,g.createElement("div",{className:z},s)));}});e.exports=q;},null);
__d("XUIRadioInput.react",["React","cx","joinClasses","invariant"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k=g.createClass({displayName:"XUIRadioInput",render:function(){j(!this.props.children||this.props.children.length===0);var l=i(this.props.className,"_55sh"),m=g.createElement("input",g.__spread({},this.props,{className:null,type:"radio"}),undefined);return (g.createElement("label",{className:l},m,g.createElement("span",null)));}});e.exports=k;},null);
__d("XUIRadioList.react",["InputLabel.react","React","ReactChildren","XUIRadioInput.react","cloneWithProps"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l=h,m=l.PropTypes,n=h.createClass({displayName:"XUIRadioList",propTypes:{name:m.string,onValueChange:m.func,selectedValue:m.any},render:function(){var o=i.map(this.props.children,function(p){return k(p,{name:this.props.name,onSelect:this.props.onValueChange,selectedValue:this.props.selectedValue});},this);return h.createElement("ul",h.__spread({},this.props,{name:null}),o);}});n.Item=h.createClass({displayName:"XUIRadioList.Item",propTypes:{name:m.string,onSelect:m.func,selectedValue:m.any,value:m.any,disabled:m.bool},render:function(){return (h.createElement("li",{className:this.props.className},h.createElement(g,{display:"inline"},h.createElement(j,{checked:this.props.selectedValue===this.props.value,name:this.props.name,onChange:this._handleChange,value:this.props.value,disabled:!!this.props.disabled}),h.createElement("label",null,this.props.children))));},_handleChange:function(event){this.props.onSelect&&this.props.onSelect(event.target.value);}});e.exports=n;},null);
__d("arrayStableSort",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();function g(h,i){return h.map(function(j,k){return {data:j,index:k};}).sort(function(j,k){return i(j.data,k.data)||(j.index-k.index);}).map(function(j){return j.data;});}e.exports=g;},null);
__d("RangedCallbackManager",["CallbackManagerController","arrayStableSort","createObjectFrom"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();function j(k,l,m){"use strict";this.$RangedCallbackManager0=[];this.$RangedCallbackManager1=false;this.$RangedCallbackManager2=false;this.$RangedCallbackManager3={};this.$RangedCallbackManager4=new g(this.$RangedCallbackManager5.bind(this));this.$RangedCallbackManager6=k;this.$RangedCallbackManager7=l;this.$RangedCallbackManager8=m;}j.prototype.executeOrEnqueue=function(k,l,m,n,o){"use strict";return this.$RangedCallbackManager4.executeOrEnqueue({start:k,limit:l},m,{strict:!!n,skipOnStrictHandler:o});};j.prototype.unsubscribe=function(k){"use strict";this.$RangedCallbackManager4.unsubscribe(k);};j.prototype.getUnavailableResources=function(k){"use strict";var l=this.$RangedCallbackManager4.getRequest(k),m=[];if(l&&!this.$RangedCallbackManager1){var n=l.request,o=this.$RangedCallbackManager9(l.options),p=n.start+n.limit;for(var q=o.length;q<p;q++)m.push(q);}return m;};j.prototype.addResources=function(k){"use strict";k.forEach(function(l){if(!this.$RangedCallbackManager3[l]){this.$RangedCallbackManager3[l]=true;this.$RangedCallbackManager0.push(l);this.$RangedCallbackManager2=null;}}.bind(this));this.resortResources();this.$RangedCallbackManager4.runPossibleCallbacks();};j.prototype.addResourcesWithoutSorting=function(k,l){"use strict";var m=this.$RangedCallbackManager0.slice(0,l);m=m.concat(k);m=m.concat(this.$RangedCallbackManager0.slice(l));this.$RangedCallbackManager0=m;Object.assign(this.$RangedCallbackManager3,i(k,true));this.$RangedCallbackManager2=null;this.$RangedCallbackManager4.runPossibleCallbacks();};j.prototype.removeResources=function(k){"use strict";k.forEach(function(l){if(this.$RangedCallbackManager3[l]){this.$RangedCallbackManager3[l]=false;var m=this.$RangedCallbackManager0.indexOf(l);if(m!=-1)this.$RangedCallbackManager0.splice(m,1);}}.bind(this));};j.prototype.removeAllResources=function(){"use strict";this.$RangedCallbackManager0=[];this.$RangedCallbackManager3={};};j.prototype.resortResources=function(){"use strict";this.$RangedCallbackManager0=h(this.$RangedCallbackManager0,function(k,l){return this.$RangedCallbackManager7(this.$RangedCallbackManager6(k),this.$RangedCallbackManager6(l));}.bind(this));};j.prototype.setReachedEndOfArray=function(){"use strict";if(!this.$RangedCallbackManager1){this.$RangedCallbackManager1=true;this.$RangedCallbackManager2=null;this.$RangedCallbackManager4.runPossibleCallbacks();}};j.prototype.hasReachedEndOfArray=function(){"use strict";return this.$RangedCallbackManager1;};j.prototype.setError=function(k){"use strict";if(this.$RangedCallbackManager2!==k){this.$RangedCallbackManager2=k;this.$RangedCallbackManager4.runPossibleCallbacks();}};j.prototype.getError=function(k,l,m){"use strict";var n=this.$RangedCallbackManager9({strict:m});return k+l>n.length?this.$RangedCallbackManager2:null;};j.prototype.hasResource=function(k){"use strict";return this.$RangedCallbackManager3[k];};j.prototype.getResourceAtIndex=function(k){"use strict";return this.$RangedCallbackManager0[k];};j.prototype.getAllResources=function(){"use strict";return this.$RangedCallbackManager0.concat();};j.prototype.getCurrentArraySize=function(k){"use strict";return this.$RangedCallbackManager9(k).length;};j.prototype.$RangedCallbackManager9=function(k){"use strict";var l=this.$RangedCallbackManager0;if(k&&k.strict){var m=k.skipOnStrictHandler||this.$RangedCallbackManager8;if(m)l=l.filter(m);}return l;};j.prototype.$RangedCallbackManager5=function(k,l){"use strict";var m=this.$RangedCallbackManager9(l);if(!this.$RangedCallbackManager1&&!this.$RangedCallbackManager2&&k.start+k.limit>m.length){return false;}else{var n=m.slice(k.start,k.start+k.limit),o=k.start+k.limit>m.length?this.$RangedCallbackManager2:null;return [n,o];}};j.prototype.getElementsUntil=function(k){"use strict";var l=[];for(var m=0;m<this.$RangedCallbackManager0.length;m++){var n=this.$RangedCallbackManager6(this.$RangedCallbackManager0[m]);if(this.$RangedCallbackManager7(n,k)>0)break;l.push(this.$RangedCallbackManager0[m]);}return l;};e.exports=j;},null);
__d("mergeDeepInto",["invariant","mergeHelpers"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();'use strict';var i=h.ArrayStrategies,j=h.checkArrayStrategy,k=h.checkMergeArrayArgs,l=h.checkMergeLevel,m=h.checkMergeObjectArgs,n=h.isTerminal,o=h.normalizeMergeArg,p=function(t,u,v,w){m(t,u);l(w);var x=u?Object.keys(u):[];for(var y=0;y<x.length;y++){var z=x[y];r(t,u,z,v,w);}},q=function(t,u,v,w){k(t,u);l(w);var x=Math.max(t.length,u.length);for(var y=0;y<x;y++)r(t,u,y,v,w);},r=function(t,u,v,w,x){var y=u[v],z=u.hasOwnProperty(v),aa=z&&n(y),ba=z&&Array.isArray(y),ca=z&&!ba&&!ba,da=t[v],ea=t.hasOwnProperty(v),fa=ea&&n(da),ga=ea&&Array.isArray(da),ha=ea&&!ga&&!ga;if(fa){if(aa){t[v]=y;}else if(ba){t[v]=[];q(t[v],y,w,x+1);}else if(ca){t[v]={};p(t[v],y,w,x+1);}else if(!z)t[v]=da;}else if(ga){if(aa){t[v]=y;}else if(ba){g(i[w]);if(w===i.Clobber)da.length=0;q(da,y,w,x+1);}else if(ca){t[v]={};p(t[v],y,w,x+1);}else !z;}else if(ha){if(aa){t[v]=y;}else if(ba){t[v]=[];q(t[v],y,w,x+1);}else if(ca){p(da,y,w,x+1);}else !z;}else if(!ea)if(aa){t[v]=y;}else if(ba){t[v]=[];q(t[v],y,w,x+1);}else if(ca){t[v]={};p(t[v],y,w,x+1);}else !z;},s=function(t,u,v){var w=o(u);j(v);p(t,w,v,0);};e.exports=s;},null);
__d("mergeDeep",["mergeHelpers","mergeDeepInto"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();'use strict';var i=g.checkArrayStrategy,j=g.checkMergeObjectArgs,k=g.normalizeMergeArg,l=function(m,n,o){var p=k(m),q=k(n);j(p,q);i(o);var r={};h(r,p,o);h(r,q,o);return r;};e.exports=l;},null);
__d("mergeObjects",["copyProperties"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();function h(){var i={};for(var j=0;j<arguments.length;j++)g(i,arguments[j]);return i;}e.exports=h;},null);
__d("whitelistObjectKeys",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();function g(h,i){var j={},k=Array.isArray(i)?i:Object.keys(i);for(var l=0;l<k.length;l++)if(typeof h[k[l]]!=='undefined')j[k[l]]=h[k[l]];return j;}e.exports=g;},null);
__d("Grid.react",["React","ReactChildren","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k=g,l=k.PropTypes,m=g.createClass({displayName:"Grid",propTypes:{cols:l.number.isRequired,fixed:l.bool,alignv:l.oneOf(['top','middle','bottom']),alignh:l.oneOf(['left','center','right']),spacing:l.string},render:function(){var o=this.props,p=o.alignh,q=o.alignv,r=o.children,s=o.cols,t=o.fixed,u=o.spacing,v=h.count(r),w=[],x=[],y=0;h.forEach(r,function(z,aa){if(z===null||z===undefined)return;var ba=z.type===n;y+=ba?Math.max(z.props.colSpan||0,1):1;var ca=((y===s?"_51mw":''));if(!ba){z=g.createElement(n,{alignh:p,alignv:q,className:j(u,ca),key:aa},z);}else z=g.cloneElement(z,{alignh:z.props.alignh||p,alignv:z.props.alignv||q,className:j(z.props.className,u,ca)});x.push(z);if(y%s===0||aa+1===v){if(t&&y<s){for(var da=y;da<s;da++)x.push(g.createElement(n,null));y=s;}w.push(g.createElement("tr",{className:"_51mx",key:aa},x));x=[];y=0;}});return (g.createElement("table",g.__spread({},this.props,{className:j(this.props.className,(("uiGrid")+(' '+"_51mz")+(t?' '+"_5f0n":''))),cellSpacing:"0",cellPadding:"0"}),g.createElement("tbody",null,w)));}}),n=g.createClass({displayName:"GridItem",propTypes:{alignv:l.oneOf(['top','middle','bottom']),alignh:l.oneOf(['left','center','right'])},render:function(){var o=j(this.props.className,(("_51m-")+(this.props.alignv==='top'?' '+"vTop":'')+(this.props.alignv==='middle'?' '+"vMid":'')+(this.props.alignv==='bottom'?' '+"vBot":'')+(this.props.alignh==='left'?' '+"hLeft":'')+(this.props.alignh==='center'?' '+"hCent":'')+(this.props.alignh==='right'?' '+"hRght":'')));return (g.createElement("td",g.__spread({},this.props,{className:o})));}});m.GridItem=n;e.exports=m;},null);
__d("Layout.react",["React","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j=g.createClass({displayName:"Layout",render:function(){var k=[],l=[],m=null;g.Children.forEach(this.props.children,function(o,p){if(!o)return;var q=m!==null,r=g.cloneElement(o,{className:i(o.props.className,((q?"_4bl8":''))),key:p});if(m===null){if(o.type===j.FillColumn){m=r;}else k.push(r);}else l.push(r);});l.reverse();var n=k.concat(l);if(m)n.push(m);return (g.createElement("div",g.__spread({},this.props,{className:i(this.props.className,'clearfix')}),n));}});j.Column=g.createClass({displayName:"Layout.Column",render:function(){return (g.createElement("div",g.__spread({},this.props,{className:i(this.props.className,"_4bl7")})));}});j.FillColumn=g.createClass({displayName:"Layout.FillColumn",render:function(){return (g.createElement("div",g.__spread({},this.props,{className:i(this.props.className,"_4bl9")})));}});e.exports=j;},null);
__d("StoreBasedStateMixinHelper",["SubscriptionsHandler","invariant"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();'use strict';function i(j){h(j.length>0);this.$StoreBasedStateMixinHelper0=j;this.$StoreBasedStateMixinHelper1=new g();}i.prototype.subscribeCallback=function(j){var k=this.$StoreBasedStateMixinHelper0.map(function(l){if(l.hasChanged&&l.getDispatchToken&&l.addListener){return l.addListener(j);}else if(l.subscribe){return l.subscribe('change',j);}else if(l.addListener){return l.addListener('change',j);}else h(false);});this.$StoreBasedStateMixinHelper1.addSubscriptions.apply(this.$StoreBasedStateMixinHelper1,k);};i.prototype.release=function(){this.$StoreBasedStateMixinHelper1.release();};e.exports=i;},null);
__d("PureStoreBasedStateMixin",["StoreBasedStateMixinHelper","invariant","setImmediate"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();'use strict';var j=function(){for(var k=[],l=0,m=arguments.length;l<m;l++)k.push(arguments[l]);return {getInitialState:function(){return this.constructor.calculateState();},componentWillMount:function(){h(this.constructor.calculateState);this._recalculateStateID=null;var n=function(){if(this.isMounted())this.setState(this.constructor.calculateState());this._recalculateStateID=null;}.bind(this);this._mixin=new g(k);this._mixin.subscribeCallback(function(){if(this._recalculateStateID===null)this._recalculateStateID=i(n);}.bind(this));},componentWillUnmount:function(){this._mixin.release();this._mixin=null;}};}.bind(this);e.exports=j;},null);
__d("StoreAndPropBasedStateMixin",["StoreBasedStateMixinHelper","invariant","setImmediate"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();'use strict';var j=function(){for(var k=[],l=0,m=arguments.length;l<m;l++)k.push(arguments[l]);return {getInitialState:function(){return this.constructor.calculateState(this.props);},componentWillMount:function(){h(this.constructor.calculateState);this._recalculateStateID=null;var n=function(){if(this.isMounted())this.setState(this.constructor.calculateState(this.props));this._recalculateStateID=null;}.bind(this);this._mixin=new g(k);this._mixin.subscribeCallback(function(){if(this._recalculateStateID===null)this._recalculateStateID=i(n);}.bind(this));},componentWillReceiveProps:function(n){this.setState(this.constructor.calculateState(n));},componentWillUnmount:function(){this._mixin.release();this._mixin=null;}};}.bind(this);e.exports=j;},null);
__d("FluxStore",["EventEmitter","invariant"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();'use strict';var i='change';function j(k){var l=this.constructor;this.__className=l.name;this.__changed=false;this.__dispatcher=k;this.__changeEvent=this.$FluxStore0();this.__emitter=new g();this.$FluxStore1=k.register(function(m){if(m.action){h(m.action.type||m.action.actionType);}else h(m.type);this.__invokeOnDispatch(m);}.bind(this));}j.prototype.addListener=function(k){return this.__emitter.addListener(this.__changeEvent,k);};j.prototype.getDispatcher=function(){return this.__dispatcher;};j.prototype.getDispatchToken=function(){return this.$FluxStore1;};j.prototype.hasChanged=function(){h(this.__dispatcher.isDispatching());return this.__changed;};j.prototype.__emitChange=function(){h(this.__dispatcher.isDispatching());this.__changed=true;};j.prototype.__invokeOnDispatch=function(k){this.__changed=false;this.__onDispatch(k);if(this.__changed)this.__emitter.emit(this.__changeEvent);};j.prototype.__onDispatch=function(k){h(false);};j.prototype.$FluxStore0=function(){return i;};e.exports=j;},null);
__d("keyMirrorRecursive",["invariant"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();'use strict';function h(k,l){return i(k,l);}function i(k,l){var m={},n;g(j(k));for(n in k){if(!k.hasOwnProperty(n))continue;var o=k[n],p=l?l+'.'+n:n;if(j(o)){o=i(o,p);}else o=p;m[n]=o;}return m;}function j(k){return k instanceof Object&&!Array.isArray(k);}e.exports=h;},null);
__d("LoadObjectOperations",["keyMirrorRecursive"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();'use strict';var h=g({CREATING:'',DELETING:'',LOADING:'',UPDATING:''});e.exports=h;},null);
__d("LoadObject",["immutable","LoadObjectOperations","Map","invariant","nullthrows"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();'use strict';var l=[(void 0),null,false,true,0,''],m='SECRET_'+Math.random(),n=new i(new i(l.map(function(s){return [s,new i([[true,new i()],[false,new i()]])];}))),o=g.Record({operation:(void 0),value:(void 0),error:(void 0),internalHasValue:false});for(var p in o)if(o.hasOwnProperty(p))r[p]=o[p];var q=o===null?null:o.prototype;r.prototype=Object.create(q);r.prototype.constructor=r;r.__superConstructor__=o;function r(s,t,u,v,w){j(s===m);o.call(this,{operation:t,value:u,error:v,internalHasValue:w});}r.$LoadObject0=function(s,t,u,v){var w=r.$LoadObject1(s,t,u,v);return (w||new r(m,s,t,u,v));};r.$LoadObject1=function(s,t,u,v){if(u!==(void 0)||!n.has(t))return null;var w=k(n.get(t)),x=k(w.get(v));if(!x.has(s)){var y=new r(m,s,t,u,v);x.set(s,y);}return k(x.get(s));};r.prototype.getOperation=function(){return this.get('operation');};r.prototype.getValue=function(){return this.get('value');};r.prototype.getValueEnforcing=function(){j(this.hasValue());var s=this.getValue();return (s);};r.prototype.getError=function(){return this.get('error');};r.prototype.hasValue=function(){return !!this.get('internalHasValue');};r.prototype.hasOperation=function(){return this.getOperation()!==(void 0);};r.prototype.hasError=function(){return this.getError()!==(void 0);};r.prototype.setOperation=function(s){var t=r.$LoadObject1(s,this.getValue(),this.getError(),this.hasValue());return t||this.set('operation',s);};r.prototype.setValue=function(s){var t=r.$LoadObject1(this.getOperation(),s,this.getError(),true);return t||this.set('value',s).set('internalHasValue',true);};r.prototype.setError=function(s){var t=r.$LoadObject1(this.getOperation(),this.getValue(),s,this.hasValue());return t||this.set('error',s);};r.prototype.removeOperation=function(){var s=this.remove('operation'),t=r.$LoadObject1(s.getOperation(),s.getValue(),s.getError(),s.hasValue());return t||s;};r.prototype.removeValue=function(){var s=this.remove('value').remove('internalHasValue'),t=r.$LoadObject1(s.getOperation(),s.getValue(),s.getError(),s.hasValue());return t||s;};r.prototype.removeError=function(){var s=this.remove('error'),t=r.$LoadObject1(s.getOperation(),s.getValue(),s.getError(),s.hasValue());return t||s;};r.prototype.isCreating=function(){return this.getOperation()===h.CREATING;};r.prototype.isDeleting=function(){return this.getOperation()===h.DELETING;};r.prototype.isDone=function(){return !this.hasOperation();};r.prototype.isLoading=function(){return this.getOperation()===h.LOADING;};r.prototype.isUpdating=function(){return this.getOperation()===h.UPDATING;};r.prototype.creating=function(){return this.setOperation(h.CREATING);};r.prototype.deleting=function(){return this.setOperation(h.DELETING);};r.prototype.done=function(){return this.removeOperation();};r.prototype.loading=function(){return this.setOperation(h.LOADING);};r.prototype.updating=function(){return this.setOperation(h.UPDATING);};r.prototype.map=function(s){if(!this.hasValue())return (this);var t=this.getValueEnforcing(),u=s(t),v=this.setValue(u);return (v);};r.creating=function(){return r.$LoadObject0(h.CREATING,(void 0),(void 0),false);};r.deleting=function(){return r.$LoadObject0(h.DELETING,(void 0),(void 0),false);};r.empty=function(){return r.$LoadObject0((void 0),(void 0),(void 0),false);};r.loading=function(){return r.$LoadObject0(h.LOADING,(void 0),(void 0),false);};r.updating=function(){return r.$LoadObject0(h.UPDATING,(void 0),(void 0),false);};e.exports=r;},null);
__d("partitionObject",["forEachObject"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();'use strict';function h(i,j){var k={},l={};g(i,function(m,n){if(j.call(i,m,n)){k[n]=m;}else l[n]=m;});return [k,l];}e.exports=h;},null);
__d("partitionObjectByKey",["partitionObject"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();'use strict';function h(i,j){return g(i,function(k,l){return j.has(l);});}e.exports=h;},null);
__d("LeafletPath",["Set","areEqual","partitionObjectByKey"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();'use strict';var j=(function(){var l=new g(['color','dashArray','fill','fillColor','fillOpacity','lineCap','lineJoin','opacity','stroke','weight']);return function(m){return i(m,l);};})(),k={mutateOptions:function(l,m,n){var o=j(m||{}),p=o[0],q=o[1],r=j(n||{}),s=r[0],t=r[1];if(!h(q,t))return false;if(!h(p,s))l.setStyle(p);return true;}};e.exports=k;},null);
__d("LeafletCircleMarker.react",["GeoCoordinates","leaflet","LeafletPath","LeafletUtils","React"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();'use strict';var l=k,m=l.PropTypes,n=k.createClass({displayName:"LeafletCircleMarker",propTypes:{options:m.object,center:m.instanceOf(g).isRequired},statics:{mutate:function(o,p,q){var r=p.options||{},s=r.radius,t=(function(x,y){var z={},aa=Object.prototype.hasOwnProperty;if(x==null)throw new TypeError();for(var ba in x)if(aa.call(x,ba)&&!aa.call(y,ba))z[ba]=x[ba];return z;})(r,{radius:1}),u=q.options||{},v=u.prevRadius,w=(function(x,y){var z={},aa=Object.prototype.hasOwnProperty;if(x==null)throw new TypeError();for(var ba in x)if(aa.call(x,ba)&&!aa.call(y,ba))z[ba]=x[ba];return z;})(u,{prevRadius:1});if(!i.mutateOptions(o,t,w))return false;if(p.center!==q.center)o.setLatLng(j.toLatLng(p.center));if(s!==v)o.setRadius(p.radius);return true;},toLayer:function(o){return h.circleMarker(j.toLatLng(o.center),o.options);}},render:function(){return null;}});e.exports=n;},null);
__d("URLMatcher",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g='!"#%&\'()*,-./:;<>?@[\\]^_`{|}',h='\u2000-\u206F\u00ab\u00bb\uff08\uff09',i='(?:25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])',j='(?:(?:ht|f)tps?)://',k='(?:(?:'+i+'[.]){3}'+i+')',l='\\[(?:(?:[A-Fa-f0-9]{1,4}::?){1,7}[A-Fa-f0-9]{1,4})\\]',m='(?:\\b)www\\d{0,3}[.]',n='[^\\s'+g+h+']',o='(?:(?:(?:[.:\\-_%@]|'+n+')*'+n+')|'+l+')',p='(?:[.][a-z]{2,4})',q='(?::\\d+){0,1}',r='(?=[/?#])',s='(?:'+'(?:'+j+o+q+')|'+'(?:'+k+q+')|'+'(?:'+l+q+')|'+'(?:'+m+o+p+q+')|'+'(?:'+o+p+q+r+')'+')',t='[/#?]',u='\\([^\\s()<>]+\\)',v='[^\\s()<>?#]+',w=new RegExp(s,'im'),x='^\\[[0-9]{1,4}:[0-9]{1,4}:[A-Fa-f0-9]{1,4}\\]',y=new RegExp(x,'im'),z='(?:'+'(?:'+t+')'+'(?:'+'(?:'+u+'|'+v+')*'+')*'+')*',aa=new RegExp('('+'(?:'+s+')'+'(?:'+z+')'+')','im'),ba=new RegExp('('+'(?:'+j+o+q+')|'+'(?:'+m+o+p+q+')'+')'),ca=/[\s'";]/,da=new RegExp(t,'im'),ea=new RegExp('[\\s!"#%&\'()*,./:;<>?@[\\]^`{|}\u00ab\u00bb\u2000-\u206F\uff08\uff09]','im'),fa=new RegExp('[\\s()<>?#]','im'),ga=new RegExp('\\s()<>'),ha=function(oa){if(oa&&oa.indexOf('@')!=-1){return (ba.exec(oa))?oa:null;}else return oa;},ia=function(oa){return ja(oa,aa);},ja=function(oa,pa){var qa=(pa.exec(oa)||[])[1]||null;return ha(qa);},ka=function(oa){return w.exec(oa);},la=function(oa){return !ca.test(oa.charAt(oa.length-1));},ma=function(oa){do{var pa=w.exec(oa);if(!pa)return null;var qa=false;if(pa[0][0]==='['&&pa.index>0&&oa[pa.index-1]==='@'){var ra=y.exec(pa[0]);if(ra){qa=true;oa=oa.substr(pa.index+ra[0].length);}}}while(qa);var sa=oa.substr(pa.index+pa[0].length);if(sa.length===0||!(da.test(sa[0])))return ha(pa[0]);var ta=0,ua=0,va=1,wa=0,xa=ua;for(var ya=1;ya<sa.length;ya++){var za=sa[ya];if(xa===ua){if(za==='('){wa=wa+1;xa=va;}else if(da.test(za)||!(ea.test(za))){ta=ya;}else if(fa.test(za))break;}else if(za==='('){wa=wa+1;}else if(za===')'){wa=wa-1;if(wa===0){xa=ua;ta=ya;}}else if(ga.test(za))break;}return ha(pa[0]+sa.substring(0,ta+1));},na={};na.permissiveMatch=ia;na.matchToPattern=ja;na.matchHost=ka;na.trigger=la;na.match=ma;e.exports=na;},null);
__d("cssVar",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();function g(h){throw new Error('cssVar'+'("'+h+'"): Unexpected class transformation.');}e.exports=g;},null);
__d("PaymentMethodUtils",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g=16,h=4,i=[{pattern:/^5[1-5]/,name:'mc',cscDigits:3,digits:16,supported:true,code:77},{pattern:/^4/,name:'visa',cscDigits:3,digits:16,supported:true,code:86},{pattern:/^3[47]/,name:'amex',cscDigits:4,digits:15,supported:true,code:65},{pattern:/^35(2[8-9]|[3-8])/,name:'jcb',cscDigits:3,digits:16,supported:true,code:74},{pattern:/^(6011|65|64[4-9]|622([2-8]|1[3-9]|12[6-9]|9[0-1]|92[0-5]))/,name:'disc',cscDigits:3,digits:16,supported:true,code:68},{pattern:/^30[0-5]/,name:'diners',digits:14,cscDigits:3,supported:false,code:64},{name:'unknown',digits:16,cscDigits:3,supported:false,code:85}],j=function(l){return l.replace(/[iIl]/g,'1').replace(/[Oo]/g,'0').replace(/[^\d]/gi,'');},k={getCardType:function(l){l=j(l);l=l.substr(0,6);for(var m=0;m<i.length;m++)if(l.match(i[m].pattern))return i[m];},getCardTypeFromCode:function(l){for(var m=0;m<i.length;m++)if(l==i[m].code)return i[m];return null;},isValidCCNumber:function(l){l=j(l);var m=k.getCardType(l);if(m.digits!==l.length)return false;if(!m.supported)return false;return k.isValidLuhn(l);},isValidLuhn:function(l){l=j(l);var m=l.split('').reverse(),n='';for(var o=0;o<m.length;o++){var p=parseInt(m[o],10);if(o%2!==0)p=p*2;n=n+p;}var q=0;for(o=0;o<n.length;o++)q=q+parseInt(n.charAt(o),10);return !!(q!==0&&q%10===0);},getMaxCardLength:function(l){return g;},getMaxCSCLength:function(){return h;}};e.exports=k;},null);
__d("MercuryLocalIDs",["PresenceUtil","randomInt"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();'use strict';var i={generateMessageID:function(j){var k=j||Date.now(),l=h(0,4294967295),m=g.getSessionID();return ("<"+k+":"+l+"-"+m+"@mail.projektitan.com>");},generateThreadID:function(j){return 'root:'+i.generateMessageID(j);}};e.exports=i;},null);
__d("MercuryMessageObject",["MercuryActionStatus","MercuryActionType","MercuryIDs","MercuryLocalIDs","MercuryMessageClientState","MercuryMessageSourceTags","MercurySingletonMixin","MercurySourceType","MercuryTimePassed","MercurySendMessageFields","fbt","formatDate"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){b.__markCompiled&&b.__markCompiled();function s(v){"use strict";this.$MercuryMessageObject0=v;}s.prototype.constructUserGeneratedMessageObject=function(v,w,x,y,z){"use strict";var aa=t(this.$MercuryMessageObject0,h.USER_GENERATED_MESSAGE,w,x);if(typeof v=='string')v=v.replace(/^\s+/,'').replace(/\s+$/,'');aa.body=v;aa.has_attachment=false;aa.html_body=false;aa.attachments=[];aa.specific_to_list=y||[];aa.creator_info=z;return aa;};s.prototype.constructStickerMessageObject=function(v,w,x){"use strict";var y=t(this.$MercuryMessageObject0,h.USER_GENERATED_MESSAGE,w,x);y.has_attachment=true;y.html_body=false;y.attachments=[];y.sticker_id=v;y.specific_to_list=[];return y;};s.prototype.constructAttachmentMessageObject=function(v,w){"use strict";var x=t(this.$MercuryMessageObject0,h.USER_GENERATED_MESSAGE,v,w);x.attachments=[];x.specific_to_list=[];return x;};s.prototype.constructLogMessageObject=function(v,w,x,y){"use strict";var z=t(this.$MercuryMessageObject0,h.LOG_MESSAGE,v,w);z.log_message_type=x;z.log_message_data=y;return z;};s.prototype.normalizeNewMessage=function(v){"use strict";if(v.status===undefined)v.status=g.UNSENT;v.timestamp_absolute=q._("Today");v.message_id=v.message_id||j.generateMessageID(v.timestamp);var w=i.getParticipantIDFromUserID(this.$MercuryMessageObject0);v.specific_to_list=v.specific_to_list||[];if(v.specific_to_list.length&&v.specific_to_list.indexOf(w)===-1)v.specific_to_list.push(w);if(!v.thread_id){if(v.specific_to_list.length==1){v.thread_id='user:'+this.$MercuryMessageObject0;}else if(v.specific_to_list.length==2){var x=v.specific_to_list[0]==w?v.specific_to_list[1]:v.specific_to_list[0];v.thread_id=i.getThreadIDFromParticipantID(x);}v.thread_id=v.thread_id||'root:'+v.message_id;}if(!v.specific_to_list.length){var y=i.tokenize(v.thread_id),z=y.type,aa=y.value;if(z=='user')v.specific_to_list=['fbid:'+aa,w];}if(!v[p.MANUAL_RETRY_CNT])v[p.MANUAL_RETRY_CNT]=0;};s.prototype.normalizeResendMessage=function(v){"use strict";v.status=g.RESENDING;v.timestamp=Date.now();v[p.MANUAL_RETRY_CNT]+=1;};s.prototype.normalizeAddAttachmentPlaceholder=function(v,w,x){"use strict";if(x.preview_attachments.length>0){v.has_attachment=true;v.preview_attachments=x.preview_attachments;}v.client_state=k.DO_NOT_SEND_TO_SERVER;v.status=g.RESENDING;v.upload_id=w;};function t(v,w,x,y){var z=u(x)?[l.CHAT]:[],aa=Date.now(),ba=r(new Date(aa),'g:ia'),ca={action_type:w,thread_id:y,author:i.getParticipantIDFromUserID(v),author_email:null,coordinates:null,timestamp:aa,timestamp_absolute:(new Date(aa)).toLocaleDateString(),timestamp_relative:ba,timestamp_time_passed:o.TODAY,is_unread:false,is_forward:false,is_filtered_content:false,is_spoof_warning:false,source:x,source_tags:z};return ca;}function u(v){switch(v){case n.CHAT_WEB:case n.CHAT_JABBER:case n.CHAT_IPHONE:case n.CHAT_MEEBO:case n.CHAT_ORCA:case n.CHAT_TEST:case n.CHAT:case n.DESKTOP:return true;default:return false;}}Object.assign(s,m);e.exports=s;},null);
__d("MercuryMessageActions",["CurrentUser","MercuryActionType","MercuryMessageObject","MercuryPayloadSource","MercuryServerRequests","MercurySingletonMixin"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();'use strict';function m(n){this.$MercuryMessageActions0=n;this.$MercuryMessageActions1=i.getForFBID(this.$MercuryMessageActions0);this.$MercuryMessageActions2=k.getForFBID(this.$MercuryMessageActions0);}m.prototype.send=function(n,o,p){o=o||Function.prototype;this.$MercuryMessageActions1.normalizeNewMessage(n);this.$MercuryMessageActions2.handleUpdate(this.$MercuryMessageActions3(Object.assign({},n),j.CLIENT_SEND_MESSAGE));this.$MercuryMessageActions2.sendNewMessage(n,p);o(n.thread_id);};m.prototype.resend=function(n,o){var p=Object.assign({},n);this.$MercuryMessageActions1.normalizeResendMessage(p);this.send(p,(void 0),o);};m.prototype.addAttachmentPlaceholder=function(n,o,p){this.$MercuryMessageActions1.normalizeAddAttachmentPlaceholder(n,o,p);this.$MercuryMessageActions1.normalizeNewMessage(n);this.$MercuryMessageActions2.handleUpdate(this.$MercuryMessageActions3(Object.assign({},n),j.CLIENT_SEND_MESSAGE));};m.prototype.cancelAttachmentPlaceholder=function(n,o){this.$MercuryMessageActions2.handleUpdate(this.$MercuryMessageActions3({upload_id:n,upload_data:o,action_type:h.CANCEL_ATTACHMENT_PLACEHOLDER},j.CLIENT_SEND_MESSAGE));};m.prototype.confirmAttachmentPlaceholder=function(n,o){this.$MercuryMessageActions2.handleUpdate(this.$MercuryMessageActions3({upload_id:n,upload_data:o,action_type:h.CONFIRM_ATTACHMENT_PLACEHOLDER},j.CLIENT_SEND_MESSAGE));};m.addShareDataToExistingMessage=function(n,o,p,q){q=q||g.getID();m.getForFBID(q).addShareDataToExistingMessage(n,o,p);};m.prototype.addShareDataToExistingMessage=function(n,o,p){this.$MercuryMessageActions2.handleUpdate(this.$MercuryMessageActions4({server_id:n,attach_key:o,attach_data:p,action_type:h.ADD_SHARE_DATA_TO_EXISTING_MESSAGE},j.SERVER_ADD_SHARE_DATA_TO_EXISTING_MESSAGE));};m.prototype.markSpam=function(n,o){this.$MercuryMessageActions2.handleUpdate(this.$MercuryMessageActions5(n,o,h.MARK_MESSAGES_SPAM,j.CLIENT_MARK_MESSAGES_SPAM));};m.prototype["delete"]=function(n,o,p){this.$MercuryMessageActions2.handleUpdate(this.$MercuryMessageActions5(n,o,h.DELETE_MESSAGES,p||j.CLIENT_DELETE_MESSAGES));};m.prototype.$MercuryMessageActions3=function(n,o){return {actions:[n],from_client:true,payload_source:o};};m.prototype.$MercuryMessageActions4=function(n,o){return {actions:[n],from_client:false,payload_source:o};};m.prototype.$MercuryMessageActions5=function(n,o,p,q){return {actions:[{action_type:p,action_id:null,thread_id:n,message_ids:o}],from_client:true,payload_source:q};};Object.assign(m,l);e.exports=m;},null);
__d("MercuryThreadActions",["MercuryActionType","MercuryPayloadSource","MercuryServerRequests","MercurySingletonMixin","MessagingTag","merge"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();'use strict';function m(n){this.$MercuryThreadActions0=n;this.__serverRequests=i.getForFBID(this.$MercuryThreadActions0);}m.prototype.markRead=function(n,o){this.batchMarkRead([n],o);};m.prototype.batchMarkRead=function(n,o){this.__serverRequests.handleUpdate(this.$MercuryThreadActions1(n,true,o));};m.prototype.markUnread=function(n,o){this.batchMarkUnread([n],o);};m.prototype.batchMarkUnread=function(n,o){this.__serverRequests.handleUpdate(this.$MercuryThreadActions1(n,false,o));};m.prototype.markSeen=function(n,o){this.__serverRequests.handleUpdate(this.__constructClientPayload([n],g.MARK_THREAD_SEEN,h.CLIENT_MARK_THREAD_SEEN,{persistent:o}));};m.prototype.archive=function(n,o){this.batchArchive([n],o);};m.prototype.batchArchive=function(n,o){n.forEach(function(p){this.__serverRequests.changeThreadArchivedStatus(p,true,o);}.bind(this));this.__serverRequests.handleUpdate(this.$MercuryThreadActions2(n,true));};m.prototype.unarchive=function(n,o){this.batchUnarchive([n],o);};m.prototype.batchUnarchive=function(n,o){n.forEach(function(p){this.__serverRequests.changeThreadArchivedStatus(p,false,o);}.bind(this));this.__serverRequests.handleUpdate(this.$MercuryThreadActions2(n,false));};m.prototype.markSpam=function(n,o){this.batchMarkSpam([n],o);};m.prototype.batchMarkSpam=function(n,o){n.forEach(function(p){this.__serverRequests.markThreadSpam(p,o);}.bind(this));this.__serverRequests.handleUpdate(this.$MercuryThreadActions3(n,k.SPAM));};m.prototype.unmarkSpam=function(n,o){this.batchUnmarkSpam([n],o);};m.prototype.batchUnmarkSpam=function(n,o){n.forEach(function(p){this.__serverRequests.unmarkThreadSpam(p,o);}.bind(this));this.__serverRequests.handleUpdate(this.$MercuryThreadActions3(n,k.INBOX));};m.prototype.changeFolder=function(n,o){this.batchChangeFolder([n],o);};m.prototype.batchChangeFolder=function(n,o){n.forEach(function(p){this.__serverRequests.changeThreadFolder(p,o);}.bind(this));this.__serverRequests.handleUpdate(this.$MercuryThreadActions3(n,o));};m.prototype["delete"]=function(n,o){this.batchDelete([n],o);};m.prototype.batchDelete=function(n,o){n.forEach(function(p){this.__serverRequests.deleteThread(p,o);}.bind(this));this.__serverRequests.handleUpdate(this.__constructClientPayload(n,g.DELETE_THREAD,h.CLIENT_DELETE_THREAD));};m.prototype.unmute=function(n){this.updateMuteSetting(n,0);};m.prototype.updateMuteSetting=function(n,o){this.__serverRequests.changeMutingOnThread(n,o);this.__serverRequests.handleUpdate(this.__constructClientPayload([n],g.CHANGE_MUTE_SETTINGS,h.CLIENT_CHANGE_MUTE_SETTINGS,{mute_settings:o}));};m.prototype.addParticipants=function(n,o){this.__serverRequests.handleUpdate(this.__constructClientPayload([n],g.ADD_PARTICIPANTS,h.CLIENT_ADD_PARTICIPANTS,{participants:o}));};m.prototype.unpinThread=function(n){this.__serverRequests.unpinThread(n);this.__serverRequests.handleUpdate(this.__constructClientPayload([n],g.UNPIN_THREAD,h.CLIENT_UNPIN_THREAD));};m.prototype.$MercuryThreadActions1=function(n,o,p){return this.__constructClientPayload(n,g.CHANGE_READ_STATUS,h.CLIENT_CHANGE_READ_STATUS,{mark_as_read:o,source:p});};m.prototype.$MercuryThreadActions2=function(n,o){return this.__constructClientPayload(n,g.CHANGE_ARCHIVED_STATUS,h.CLIENT_CHANGE_ARCHIVED_STATUS,{archived:o});};m.prototype.$MercuryThreadActions3=function(n,o){return this.__constructClientPayload(n,g.CHANGE_FOLDER,h.CLIENT_CHANGE_FOLDER,{new_folder:o});};m.prototype.__constructClientPayload=function(n,o,p,q){return {actions:n.map(function(r){return l({action_type:o,action_id:null,thread_id:r},q);}),from_client:true,payload_source:p};};Object.assign(m,j);e.exports=m;},null);
__d("ChatImageArrowDirection",["keyMirror"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();'use strict';var h=g({BOTH:null,LEFT:null,RIGHT:null});e.exports=h;},null);
__d("MessengerButton.react",["ReactComponentWithPureRenderMixin","React","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();'use strict';var k=h,l=k.PropTypes,m=h.createClass({displayName:"MessengerButton",mixins:[g],propTypes:{label:l.string.isRequired,type:l.oneOf(['primary','secondary']).isRequired,use:l.oneOf(['default','danger']).isRequired},getDefaultProps:function(){return {use:'default'};},handleLinkClick:function(n){if(this.props.disabled){n.preventDefault();}else if(this.props.onClick)this.props.onClick(n);},render:function(){var n=this.props,o=n.className,p=n.label,q=(function(r,s){var t={},u=Object.prototype.hasOwnProperty;if(r==null)throw new TypeError();for(var v in r)if(u.call(r,v)&&!u.call(s,v))t[v]=r[v];return t;})(n,{className:1,label:1});return (h.createElement("a",h.__spread({className:j((("_3quh")+(' '+"_5vn4")+(' '+"_30yy")+(this.props.type==='primary'?' '+"_2t_":'')+(this.props.type==='secondary'?' '+"_2u0":'')+(this.props.use==='danger'?' '+"_3ay_":'')+(this.props.disabled?' '+"_4zab":'')),o),href:"#"},q,{onClick:this.handleLinkClick}),p));}});e.exports=m;},null);
__d("MessengerDialogHeader.react",["React","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();'use strict';var j=g.createClass({displayName:"MessengerDialogHeader",render:function(){return (g.createElement("h4",{className:i("_4ebz",this.props.className)},this.props.children));}});e.exports=j;},null);
__d("MercuryParticipantsImage.react",["MercuryParticipants","React","SplitImage.react","areEqual"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();'use strict';var k=h,l=k.PropTypes,m=h.createClass({displayName:"MercuryParticipantsImage",_bigImageToken:(null),propTypes:{participants:l.array.isRequired,size:l.number},getInitialState:function(){return {participantImages:[]};},componentDidMount:function(){this._getParticipantImages(this.props);},componentWillReceiveProps:function(n){this._getParticipantImages(n);},componentWillUnmount:function(){this._bigImageToken&&this._bigImageToken.remove();},shouldComponentUpdate:function(n,o){return (n.size!==this.props.size||!o||!j(o.participantImages,this.state.participantImages));},render:function(){if(this.state.participantImages.length>0)return (h.createElement(i,{border:true,className:this.props.className,srcs:this.state.participantImages,size:this.props.size}));return null;},_getParticipantImages:function(n){this._bigImageToken&&this._bigImageToken.remove();(this)._bigImageToken=g.getOrderedBigImageMulti(n.participants,function(o){this.isMounted()&&this.setState({participantImages:o});}.bind(this));}});e.exports=m;},null);
__d("MercuryTypeaheadDataSource",["Banzai","BanzaiLogger","CurrentUser","DataSource","MercuryParticipantTypes","MercuryTypeaheadConstants","OrderedFriendsList","ShortProfiles","WorkModeConfig","debounce","merge"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){b.__markCompiled&&b.__markCompiled();var r=500,s=[],t={},u={},v={},w=false,x=false;for(var y in j)if(j.hasOwnProperty(y))aa[y]=j[y];var z=j===null?null:j.prototype;aa.prototype=Object.create(z);aa.prototype.constructor=aa;aa.__superConstructor__=j;function aa(ba){"use strict";ba=ba||{};ba.kanaNormalization=true;j.call(this,ba);this.logQuery=p(function(ca){this.$MercuryTypeaheadDataSource0(ca);},r,this,true);this.logResponse=p(function(ca){this.$MercuryTypeaheadDataSource0(ca);},r,this,true);}aa.prototype.dirty=function(){"use strict";this.$MercuryTypeaheadDataSource1=s;this.localCache=u;this.queryCache=t;this.queryIDs=v;return this;};aa.prototype.bootstrap=function(){"use strict";if(w||x)return false;this.$MercuryTypeaheadDataSource0({event:'bootstrap_start'});x=true;n.fetchAll().then(function(){this.updateBootstrapData();this.$MercuryTypeaheadDataSource0({event:'bootstrap_end'});x=false;w=true;}.bind(this),function(){this.$MercuryTypeaheadDataSource0({event:'bootstrap_failure'});}.bind(this));return true;};aa.prototype.updateBootstrapData=function(){"use strict";var ba=this.getCachedShortProfileIDs(),ca=o.is_work_user?k.FB4C:k.FRIEND,da=ba.map(function(ea){var fa=n.getNow(ea),ga=ea==i.getID()?ca:fa.type,ha=[fa.additionalName,fa.alternateName].concat(fa.searchTokens||[]).join(' ');return {uid:ea,index:m.getActiveRank(ea),text:fa.name,tokens:ha,localized_text:fa.name,additional_text:fa.additionalName,photo:fa.thumbSrc,render_type:ga,type:l.USER_TYPE};});if(da.length)this.addEntries(da);};aa.prototype.query=function(ba,ca,da,ea){"use strict";var fa=ca||ba.length===1;return z.query.call(this,ba,fa,da,ea);};aa.prototype.getQueryData=function(ba,ca){"use strict";return q(z.getQueryData.call(this,ba,ca),{needs_friends:!this.isBootstrapped()});};aa.prototype.setEntry=function(ba,ca){"use strict";this.$MercuryTypeaheadDataSource1[ba]=ca;};aa.prototype.getEntry=function(ba){"use strict";return this.$MercuryTypeaheadDataSource1[ba]||null;};aa.prototype.getCachedShortProfileIDs=function(){"use strict";var ba=n.getCachedProfileIDs(),ca=ba.filter(function(da){var ea=n.getNow(da);return (da==i.getID()||ea.type===k.FRIEND);});return ca;};aa.prototype.isBootstrapped=function(){"use strict";return w;};aa.prototype.isBootstrapping=function(){"use strict";return x;};aa.prototype.$MercuryTypeaheadDataSource0=function(ba){"use strict";if(!g.isEnabled('mercury_typeahead_logging'))return;h.log('MercuryQueryResultsLoggerConfig',ba);};e.exports=aa;},null);
__d("MercuryMessages",["AsyncRequest","BanzaiODS","CurrentUser","EventEmitter","ImmutableObject","LogHistory","Map","MercuryActionStatus","MercuryActionType","MercuryAssert","MercuryAttachmentType","MercuryLogMessageType","MercuryMessageClientState","MercuryPayloadSource","MercurySingletonMixin","MercuryMessageActions","MercuryMessageIDs","RangedCallbackManager","MercurySendMessageFields","MercuryServerRequests","MercuryThreadActions","MercuryThreadInformer","MercuryThreads","URI","copyProperties","debounceAcrossTransitions","invariant","isMessengerDotComURI","mergeDeep"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia){b.__markCompiled&&b.__markCompiled();'use strict';var ja=new j(),ka=l.getInstance('mercury_messages');function la(xa,ya){var za=ya;if(xa._localIdsMap[ya])za=xa._localIdsMap[ya];return xa._messages.get(za);}function ma(xa){switch(xa){case t.UNKNOWN:case t.SERVER_INITIAL_DATA:case t.SERVER_FETCH_THREAD_INFO:case t.SERVER_THREAD_SYNC:return true;}return false;}function na(xa,ya){if(!xa._threadsToMessages[ya])xa._threadsToMessages[ya]=new x(function(za){return la(xa,za).timestamp;},function(za,ab){return ab-za;});return xa._threadsToMessages[ya];}function oa(xa,ya,za){ya.forEach(function(ab){var bb=na(xa,ab);bb.setReachedEndOfArray();xa._emitReorderedChange(ab,za);});}function pa(xa){this._fbid=xa;this._messageActions=v.getForFBID(this._fbid);this._serverRequests=z.getForFBID(this._fbid);this._threadInformer=ba.getForFBID(this._fbid);this._threads=ca.getForFBID(this._fbid);this._threadActions=aa.getForFBID(this._fbid);this._didChange=false;this._failedHistoryFetchThreads={};this._threadsToMessages={};this._localTitanMessagesCount={};this._messages=new m();this._attachmentData={};this._messagesNeedingAttachmentData={};this._localIdsMap={};this._serverRequests.subscribe('update-messages',function(ya,za){var ab=(za.actions||[]).filter(function(cb){var db=cb.action_type,eb=((cb.is_forward||cb.thread_id)&&(db==o.LOG_MESSAGE||db==o.USER_GENERATED_MESSAGE||db==o.SEND_MESSAGE||db==o.DELETE_THREAD||db==o.DELETE_MESSAGES||db==o.MARK_MESSAGES_SPAM)),fb=((cb.upload_id&&cb.upload_data)&&(db==o.CANCEL_ATTACHMENT_PLACEHOLDER||db==o.CONFIRM_ATTACHMENT_PLACEHOLDER)),gb=(db==o.ADD_SHARE_DATA_TO_EXISTING_MESSAGE&&(cb.server_id&&cb.attach_key&&cb.attach_data));return (eb||fb||gb);}),bb=ma(za.payload_source);this.handleUpdates(ab,bb,za.payload_source,za.from_client);if(za.end_of_history)oa(this,za.end_of_history,za.payload_source);if(this._didChange){this._didChange=false;ja.emit('change');}}.bind(this));ka.debug('constructed',{fbid:this._fbid});}ea(pa.prototype,{getMessagesFromIDs:function(xa){return (xa||[]).map(la.bind(null,this)).filter(function(ya){return ya;});},hasLoadedNMessages:function(xa,ya){var za=na(this,xa);return za.hasReachedEndOfArray()||za.getCurrentArraySize()>=ya;},hasLoadedExactlyNMessages:function(xa,ya){var za=na(this,xa);return za.getCurrentArraySize()==ya;},clearMercuryInternalState_DO_NOT_USE:function(){this._failedHistoryFetchThreads={};this._threadsToMessages={};this._localTitanMessagesCount={};this._messages=new m();this._attachmentData={};this._messagesNeedingAttachmentData={};this._localIdsMap={};},getThreadMessagesRange:function(xa,ya,za,ab,bb,cb){var db=na(this,xa),eb=function(mb){ab(qa(this,mb));}.bind(this),fb=db.executeOrEnqueue(ya,za,eb),gb=db.getUnavailableResources(fb),hb=this._failedHistoryFetchThreads[xa];if(gb.length&&!hb){var ib=db.getCurrentArraySize(),jb=this._localTitanMessagesCount[xa]||0,kb=ib-jb,lb=gb.length+jb;ka.debug('fetch_missing_messages',{threadID:xa,offset:ya,limit:za,missingIndices:gb,messageCount:ib,localMessageCount:jb});this._serverRequests.fetchThreadMessages(xa,kb,lb,bb,cb);}else this._failedHistoryFetchThreads[xa]=false;return fb;},getThreadMessagesRangeNow:function(xa,ya,za){var ab=na(this,xa),bb=[];for(var cb=ya;cb<ya+za;cb++){var db=ab.getResourceAtIndex(cb),eb=la(this,db);eb&&bb.push(eb);}return bb;},getThreadMessagesSinceTimestamp:function(xa,ya){var za=na(this,xa),ab=za.getElementsUntil(ya);return qa(this,ab);},hasLoadedAllMessages:function(xa){return na(this,xa).hasReachedEndOfArray();},getCurrentlyLoadedMessages:function(xa){var ya=na(this,xa).getAllResources();return qa(this,ya);},unsubscribe:function(xa,ya){p.isThreadID(ya);var za=na(this,ya);za.unsubscribe(xa);},_addNewMessage:function(xa,ya){ta(this,ya);ua(ya);this._messages.set(xa,new k(ya));},_updateMessage:function(xa,ya,za){var ab=k.set(ya,za);this._messages.set(xa,ab);return ab;},_addAttachmentData:function(xa,ya,za){var ab=la(this,xa);if(ab){var bb=ab.attachments.indexOf(ya);if(bb!=-1){this._updateMessage(xa,ab,{attachments:ab.attachments.map(function(cb,db){return (db===bb)?za:cb;})});this._emitUpdatedChange(ab.thread_id,ab.message_id,'attach');}}else{if(!this._attachmentData[xa])this._attachmentData[xa]=[];this._attachmentData[xa].push({attach_key:ya,data:za});}},_shouldSortOutOfOrderMessages:function(xa,ya,za){if(xa==t.CLIENT_CHANNEL_MESSAGE){var ab=this.getThreadMessagesSinceTimestamp(ya,za);if(ab.length>0){h.bumpEntityKey('chat.web','channel.messages_reordered');return true;}}return false;},_preprocessIncomingAction:function(xa,ya){var za=xa.action_type;if(ya==t.CLIENT_CHANNEL_MESSAGE&&za==o.USER_GENERATED_MESSAGE&&xa.threading_id&&this._localIdsMap[xa.threading_id]===xa.threading_id){xa.client_message_id=xa.threading_id;xa.status=n.SUCCESS;xa.action_type=o.SEND_MESSAGE;za=xa.action_type;}if(ya===t.CLIENT_CHANNEL_MESSAGE&&za==o.USER_GENERATED_MESSAGE){var ab=this._threads.getThreadMetaNow(xa.thread_id);if(ab&&ab.folder)xa.folder=ab.folder;}return xa;},handleUpdates:function(xa,ya,za,ab){var bb,cb={},db={};for(var eb=0;eb<xa.length;eb++){var fb=this._preprocessIncomingAction(xa[eb],za),gb=fb.action_type,hb=la(this,fb.message_id);if(fb.is_forward||za==t.SERVER_SEARCH){if(!this._messages.has(fb.message_id))this._addNewMessage(fb.message_id,fb);continue;}else if(fb.client_state===s.SEND_TO_SERVER){this._addNewMessage(fb.message_id,fb);continue;}else if(gb==o.SEND_MESSAGE){var ib=fb.client_message_id;if(ib&&this._localIdsMap[ib]&&fb.status){var jb=la(this,ib),kb=jb.status;if(jb.status==n.SUCCESS)continue;if(fb.status==n.UNCONFIRMED){if(!db[fb.thread_id])db[fb.thread_id]=[];db[fb.thread_id].push(ib);}else if(!cb[fb.thread_id])cb[fb.thread_id]=[];this._updateLocalMessage(fb);if(typeof kb!==(void 0)||fb.status==n.FAILED_UNKNOWN_REASON||fb.status==n.UNABLE_TO_CONFIRM||fb.status==n.SUCCESS||fb.status==n.ERROR)this._emitUpdatedChange(fb.thread_id,la(this,ib).message_id,za);}continue;}else if(gb==o.DELETE_THREAD){na(this,fb.thread_id).removeAllResources();continue;}else if(gb==o.DELETE_MESSAGES){this._deleteMessages(fb.thread_id,fb.message_ids,za);continue;}else if(gb===o.MARK_MESSAGES_SPAM){this._markMessagesSpam(fb,za);continue;}else if((fb.threading_id&&this._localIdsMap[fb.threading_id])||(hb&&!hb.is_forward)){if(hb&&fb.ranges&&fb.ranges.length>0){var lb=hb.message_id;this._updateMessage(this._localIdsMap[lb]||lb,hb,{ranges:xa.ranges});this._emitUpdatedChange(hb.thread_id,hb.message_id,'link_shim');}continue;}else if(gb===o.CONFIRM_ATTACHMENT_PLACEHOLDER){this._confirmAttachmentPlaceholder(fb.upload_id,fb.upload_data);continue;}else if(gb===o.CANCEL_ATTACHMENT_PLACEHOLDER){this._cancelAttachmentPlaceholder(fb.upload_id,fb.upload_data);continue;}else if(gb===o.ADD_SHARE_DATA_TO_EXISTING_MESSAGE){this._addAttachmentData(fb.server_id,fb.attach_key,fb.attach_data);continue;}else{if(za===t.CLIENT_SEND_MESSAGE){this._localIdsMap[fb.message_id]=fb.message_id;if(fb.thread_id=='root:'+fb.message_id)na(this,fb.thread_id).setReachedEndOfArray();}if(gb==o.LOG_MESSAGE&&fb.log_message_type==r.SERVER_ERROR)this._failedHistoryFetchThreads[fb.thread_id]=true;if(fb.client_state===s.DO_NOT_SEND_TO_SERVER&&fb.upload_id)this._uploadMessages[fb.upload_id]=fb;if(!cb[fb.thread_id])cb[fb.thread_id]=[];cb[fb.thread_id].push(fb.message_id);this._addNewMessage(fb.message_id,fb);if(fb.threading_id&&fb.threading_id!=fb.message_id)w.addServerID(fb.threading_id,fb.message_id);if(fb[y.MANUAL_RETRY_CNT]>0){bb=na(this,fb.thread_id);bb.resortResources([fb.message_id]);this._emitReorderedChange(fb.thread_id,t.CLIENT_SEND_MESSAGE);}ya=ya||this._shouldSortOutOfOrderMessages(za,fb.thread_id,fb.timestamp);if(!ya)this._emitReceivedChange(la(this,fb.message_id));continue;}}for(var mb in cb){bb=na(this,mb);var nb=bb.getAllResources(),ob=nb.filter(function(qb){var rb=this._messages.get(qb);return rb.action_type==o.LOG_MESSAGE&&rb.log_message_type==r.SERVER_ERROR;}.bind(this));bb.removeResources(ob);if(ab)ra(this,mb,cb[mb]);if(ya){bb.addResources(cb[mb]);this._emitReorderedChange(mb,za);}else bb.addResourcesWithoutSorting(cb[mb].reverse(),0);this._threadInformer.updatedThread(mb);}var pb=Object.keys(db);if(pb.length)this._serverRequests.requestMessageConfirmation(db);ka.debug('handle_updates',{localMessageCounts:ia(this._localTitanMessagesCount)});},isFirstMessage:function(xa){var ya=na(this,xa.thread_id);if(ya.getCurrentArraySize()===0)return false;var za=ya.getResourceAtIndex(ya.getCurrentArraySize()-1),ab=la(this,za).message_id,bb=la(this,xa.message_id).message_id;return ya.hasReachedEndOfArray()&&ab==bb;},_markMessagesSpam:function(xa,ya){var za=xa,ab=za.thread_id,bb=za.message_ids;if(!bb.length)return;this._deleteIndividualMessages(ab,bb,ya);this._serverRequests.markMessagesSpam(ab,bb);},_deleteMessages:function(xa,ya,za){if(!ya.length)return;this._deleteIndividualMessages(xa,ya,za);if(za!==t.CLIENT_CHANNEL_MESSAGE)this._serverRequests.deleteMessages(xa,ya);},_deleteIndividualMessages:function(xa,ya,za){var ab=ya.map(function(cb){return la(this,cb).message_id;},this),bb=na(this,xa);bb.removeResources(ab);this._emitReorderedChange(xa,za);},_updateLocalMessage:function(xa){var ya=la(this,xa.client_message_id),za={};za.status=xa.status;if(xa.status===n.SUCCESS||xa.error_data)za.error_data=xa.error_data;var ab=xa.message_id,bb=xa.client_message_id;if(this._messages.has(ab)){this._updateMessage(ab,ya,za);return false;}if(xa.timestamp)za.timestamp=xa.timestamp;if(xa.log_message_data)za.log_message_data=xa.log_message_data;if(xa.ranges&&xa.ranges.length){ua(xa);za.ranges=xa.ranges;}if(xa.attachments&&xa.attachments.length){za.raw_attachments=null;za.attachments=xa.attachments;ta(this,za,ab);}this._localIdsMap[bb]=ab;w.addServerID(bb,ab);var cb=this._updateMessage(ab,ya,za);this._messages.set(bb,new k());if(sa(cb))this._localTitanMessagesCount[cb.thread_id]--;return true;},getNumberLocalMessages:function(xa){return this._localTitanMessagesCount[xa]||0;},_uploadMessages:{},_confirmAttachmentPlaceholder:function(xa,ya){var za=this._popPendingAttachmentMessage(xa,ya);this._serverRequests.sendNewMessage(za);},_cancelAttachmentPlaceholder:function(xa,ya){var za=this._popPendingAttachmentMessage(xa,ya);this._deleteIndividualMessages(za.thread_id,[za.message_id]);if(this._localTitanMessagesCount[za.thread_id])this._localTitanMessagesCount[za.thread_id]--;},_popPendingAttachmentMessage:function(xa,ya){var za=this._uploadMessages[xa];ga(za);za.image_ids=ya.image_ids;za.file_ids=ya.file_ids;za.audio_ids=ya.audio_ids;za.gif_ids=ya.gif_ids;za.client_state=s.SEND_TO_SERVER;delete this._uploadMessages[xa];return za;},_emitUpdatedChange:function(xa,ya,za){this._didChange=true;this._threadInformer.updatedMessage(xa,ya,za);},_emitReceivedChange:function(xa){this._didChange=true;this._threadInformer.receivedMessage(xa);},_emitReorderedChange:function(xa,ya){this._didChange=true;this._threadInformer.reorderedMessages(xa,ya);}});Object.assign(pa,u,{addListener:function(xa,ya){return ja.addListener(xa,ya);}});function qa(xa,ya){var za=ya.map(la.bind(null,xa));return za.reverse();}function ra(xa,ya,za){var ab=za.filter(function(bb){return sa(la(xa,bb));});if(!xa._localTitanMessagesCount[ya])xa._localTitanMessagesCount[ya]=0;xa._localTitanMessagesCount[ya]+=ab.length;}function sa(xa){var ya=xa.action_type;if(ya==o.USER_GENERATED_MESSAGE)return true;switch(xa.log_message_type){case r.SUBSCRIBE:case r.UNSUBSCRIBE:case r.SERVER_ERROR:case r.LIVE_LISTEN:return false;default:return true;}}function ta(xa,ya,za){za=za||ya.message_id;var ab=xa._attachmentData[za];if(ab){ab.forEach(function(bb){var cb=ya.attachments.indexOf(bb.attach_key);if(cb!==-1)ya.attachments[cb]=bb.data;});delete xa._attachmentData[za];}else if(!ya.is_forward&&va(xa,ya)){xa._messagesNeedingAttachmentData[za]=true;wa(xa);}}function ua(xa){if(!xa.ranges)return;xa.ranges.forEach(function(ya){if(!ya.entity||ya.entity.external||!ya.entity.url)return;var za=new da(ya.entity.url);if(ha(da.getRequestURI())&&!za.getDomain()){za.setProtocol('https').setDomain('www.facebook.com');ya.entity.url=za.toString();}});}function va(xa,ya){if(!ya||!ya.attachments)return false;for(var za=0;za<ya.attachments.length;za++){var ab=ya.attachments[za];if(typeof ab==='string'&&ab.indexOf(q.SHARE)===0)return true;}var bb=ya.forward_message_ids||[];for(za=0;za<bb.length;za++){var cb=la(xa,bb[za]);if(va(xa,cb))return true;}return false;}var wa=fa(function(xa){var ya={};for(var za in xa._messagesNeedingAttachmentData){var ab=la(xa,za);if(va(xa,ab))ya[za]=true;}var bb=Object.keys(ya);if(bb.length){var cb={message_ids:bb};if(xa._fbid!=i.getID())cb.request_user_id=xa._fbid;new g('/ajax/mercury/attachments/fetch_shares.php').setData(cb).setAllowCrossPageTransition(true).send();}xa._messagesNeedingAttachmentData={};},0,this);e.exports=pa;},null);
__d("MercuryChannelHandler",["Arbiter","ChannelConstants","MercuryActionType","MercuryGlobalActionType","MercuryMessages","MercuryPayloadSource","MercuryServerRequests","MercurySingletonMixin","MercuryThreadInformer","MercuryViewer","MessagingEvent","MessagingReliabilityLogger","MessagingTag","PresenceUtil","copyProperties","mixin"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){b.__markCompiled&&b.__markCompiled();var w=v(n);for(var x in w)if(w.hasOwnProperty(x))z[x]=w[x];var y=w===null?null:w.prototype;z.prototype=Object.create(y);z.prototype.constructor=z;z.__superConstructor__=w;function z(aa){"use strict";this.$MercuryChannelHandler0=aa;this.__serverRequests=m.getForFBID(this.$MercuryChannelHandler0);this.$MercuryChannelHandler1=o.getForFBID(this.$MercuryChannelHandler0);this.$MercuryChannelHandler2=k.getForFBID(this.$MercuryChannelHandler0);this.$MercuryChannelHandler3=[];}z.prototype.getInstanceFBID=function(){"use strict";return this.$MercuryChannelHandler0;};z.prototype.$MercuryChannelHandler4=function(aa,ba){"use strict";if(!this.$MercuryChannelHandler5(aa)||!ba.obj||!ba.obj.message){r.addEntry('channel_receive','invalid_data');return;}var ca=ba.obj.message,da=ca.other_user_fbid?ca.other_user_fbid:ca.thread_fbid,ea={author:ca.mercury_author_id,author_email:ca.mercury_author_email,body:ca.body,subject:ca.subject,has_attachment:ca.has_attachment,attachments:ca.attachments,html_body:ca.html_body,thread_id:ca.tid,thread_fbid:ca.thread_fbid,other_user_fbid:ca.other_user_fbid,message_id:ca.mid,coordinates:ca.mercury_coordinates,is_spoof_warning:ca.is_spoof_warning,ranges:ca.ranges,source:ca.mercury_source,source_tags:ca.mercury_source_tags,threading_id:ca.threading_id,timestamp:ca.timestamp,timestamp_absolute:ca.timestamp_absolute,timestamp_relative:ca.timestamp_relative,timestamp_time_passed:ca.timestamp_time_passed,action_type:i.USER_GENERATED_MESSAGE,is_unread:ca.is_unread,is_forward:false,forward_count:ca.forward_count||ca.forward,forward_message_ids:ca.forward_msg_ids,location_text:ca.location_text,folder:ba.obj.folder};if("sync_id" in ca){ea.sync_id=ca.sync_id;}else ea.action_id=ca.action_id;var fa=[u({},ea)];fa=fa.concat(ca.forward_actions||[]);var ga=l.CLIENT_CHANNEL_MESSAGE;this.__serverRequests.handleUpdateWaitForThread({actions:fa,payload_source:ga},da);if(!ca.is_unread&&p.isViewer(ca.mercury_author_id)){var ha={};ha[da]=ba.obj.folder;this.$MercuryChannelHandler6(this.__getMessagingPayloadType(),{obj:{event:q.READ,thread_fbids:ca.thread_fbid?[ca.thread_fbid]:[],other_user_fbids:ca.other_user_fbid?[ca.other_user_fbid]:[],folder_info:ha,timestamp:ca.timestamp}});}r.addEntry('channel_receive','success',[da,ea.message_id,t.getSessionID()]);};z.prototype.$MercuryChannelHandler6=function(aa,ba){"use strict";if(!this.$MercuryChannelHandler5(aa)||!ba.obj||(!ba.obj.thread_fbids&&!ba.obj.other_user_fbids))return;var ca=[],da=ba.obj.event==q.READ;(ba.obj.thread_fbids||[]).forEach(function(ea){ca.push({action_type:i.CHANGE_READ_STATUS,action_id:null,thread_fbid:ea,mark_as_read:da,timestamp:ba.obj.timestamp||0,folder:ba.obj.folder_info[ea]});});(ba.obj.other_user_fbids||[]).forEach(function(ea){ca.push({action_type:i.CHANGE_READ_STATUS,action_id:null,other_user_fbid:ea,mark_as_read:da,timestamp:ba.obj.timestamp||0,folder:ba.obj.folder_info[ea]});});this.__serverRequests.handleUpdate({actions:ca,payload_source:l.CLIENT_CHANNEL_MESSAGE});};z.prototype.$MercuryChannelHandler7=function(aa,ba){"use strict";if(!this.$MercuryChannelHandler5(aa)||!ba.obj||!(ba.obj.thread_fbids||ba.obj.other_user_fbids))return;var ca=[];(ba.obj.thread_fbids||[]).forEach(function(da){ca.push({action_type:i.DELETE_THREAD,action_id:null,thread_fbid:da});});(ba.obj.other_user_fbids||[]).forEach(function(da){ca.push({action_type:i.DELETE_THREAD,action_id:null,other_user_fbid:da});});this.__serverRequests.handleUpdate({actions:ca,payload_source:l.CLIENT_CHANNEL_MESSAGE});};z.prototype.$MercuryChannelHandler8=function(aa,ba){"use strict";if(!this.$MercuryChannelHandler5(aa)||!ba.obj||(!ba.obj.thread_fbids&&!ba.obj.other_user_fbids)||!ba.obj.mids)return;var ca=ba.obj.thread_fbids.length?ba.obj.thread_fbids[0]:null,da=ba.obj.other_user_fbids.length?ba.obj.other_user_fbids[0]:null,ea={action_type:i.DELETE_MESSAGES,action_id:null,thread_fbid:ca,other_user_fbid:da,message_ids:ba.obj.mids};this.__serverRequests.handleUpdate({actions:[ea],threads:[ba.obj.updated_thread],payload_source:l.CLIENT_CHANNEL_MESSAGE});};z.prototype.$MercuryChannelHandler9=function(aa,ba){"use strict";if(!this.$MercuryChannelHandler5(aa)||!ba.obj||!ba.obj.folder)return;var ca={action_type:j.MARK_ALL_READ,action_id:ba.obj.action_id,folder:ba.obj.folder};this.__serverRequests.handleUpdate({global_actions:[ca]});};z.prototype.$MercuryChannelHandlera=function(aa,ba){"use strict";if(!this.$MercuryChannelHandler5(aa)||(!ba.obj.thread_fbids&&!ba.obj.other_user_fbids))return;var ca=l.CLIENT_CHANNEL_MESSAGE;(ba.obj.thread_fbids||[]).forEach(function(da){var ea={action_type:i.CHANGE_ARCHIVED_STATUS,action_id:null,thread_fbid:da,other_user_fbid:null,archived:ba.obj.state};this.__serverRequests.handleUpdateWaitForThread({actions:[u({},ea)],payload_source:ca},da);},this);(ba.obj.other_user_fbids||[]).forEach(function(da){var ea={action_type:i.CHANGE_ARCHIVED_STATUS,action_id:null,thread_fbid:null,other_user_fbid:da,archived:ba.obj.state};this.__serverRequests.handleUpdateWaitForThread({actions:[u({},ea)],payload_source:ca},da);},this);};z.prototype.$MercuryChannelHandlerb=function(aa,ba){"use strict";if(!this.$MercuryChannelHandler5(aa)||(!ba.obj.thread_fbids&&!ba.obj.other_user_fbids))return;var ca=l.CLIENT_CHANNEL_MESSAGE,da;(ba.obj.thread_fbids||[]).forEach(function(ea){if(ba.obj.event==q.TAG){da=ba.obj.tag;}else da=ba.obj.marked_as_spam?s.SPAM:s.INBOX;var fa={action_type:i.CHANGE_FOLDER,action_id:null,thread_fbid:ea,other_user_fbid:null,new_folder:da};this.__serverRequests.handleUpdateWaitForThread({actions:[u({},fa)],payload_source:ca},ea);},this);(ba.obj.other_user_fbids||[]).forEach(function(ea){if(ba.obj.event==q.TAG){da=ba.obj.tag;}else da=ba.obj.marked_as_spam?s.SPAM:s.INBOX;var fa={action_type:i.CHANGE_FOLDER,action_id:null,other_user_fbid:ea,thread_fbid:null,new_folder:da};this.__serverRequests.handleUpdateWaitForThread({actions:[u({},fa)],payload_source:ca},ea);},this);};z.prototype.$MercuryChannelHandlerc=function(aa,ba){"use strict";if(!this.$MercuryChannelHandler5(aa)||!ba.obj.tag)return;switch(ba.obj.tag){case s.ACTION_ARCHIVED:this.$MercuryChannelHandlera(aa,ba);break;case s.INBOX:case s.OTHER:this.$MercuryChannelHandlerb(aa,ba);break;}};z.prototype.__markAsSeen=function(aa,ba){"use strict";if(!this.$MercuryChannelHandlerd(aa)||!ba.obj||!ba.obj.seen_timestamp)return;this.__serverRequests.handleUpdate({message_counts:[{seen_timestamp:ba.obj.seen_timestamp,folder:s.INBOX}],unseen_thread_fbids:[{thread_fbids:[],other_user_fbids:[],folder:s.INBOX}],payload_source:l.CLIENT_CHANNEL_MESSAGE});};z.prototype.__updateModelsFromMercuryPayload=function(aa,ba){"use strict";if(!this.$MercuryChannelHandlere(aa)||!ba.obj)return;this.$MercuryChannelHandler1.synchronizeInforms(function(){var ca=ba.obj,da=[];(ca.actions||[]).forEach(function(ea){var fa=i.USER_GENERATED_MESSAGE;if(ea.action_type==i.LOG_MESSAGE){var ga=l.CLIENT_CHANNEL_MESSAGE,ha;ha=ea.other_user_fbid||ea.thread_fbid;this.__serverRequests.handleUpdateWaitForThread({actions:[u({},ea)],payload_source:ga},ha);}else if(ea.action_type!=fa)da.push(ea);},this);ca.actions=da;ca.payload_source=l.CLIENT_CHANNEL_MESSAGE;this.__serverRequests.handleUpdate(ca);}.bind(this));};z.prototype.$MercuryChannelHandlerf=function(aa,ba){"use strict";this.__serverRequests.handleRoger(ba.obj);};z.prototype.$MercuryChannelHandlerg=function(aa,ba){"use strict";if(!this.$MercuryChannelHandler5(aa)||!ba.obj||ba.obj.mute_settings===(void 0)||(!ba.obj.thread_fbid&&!ba.obj.other_user_fbid))return;var ca=i.CHANGE_MUTE_SETTINGS,da=[{action_type:ca,action_id:null,thread_fbid:ba.obj.thread_fbid,other_user_fbid:ba.obj.other_user_fbid,mute_settings:ba.obj.mute_settings}];this.__serverRequests.handleUpdate({actions:da,payload_source:l.CLIENT_CHANNEL_MESSAGE});};z.prototype.__handleMessagingPayload=function(aa,ba){"use strict";switch(ba.obj.event){case q.DELIVER:this.$MercuryChannelHandler4(aa,ba);break;case q.READ:case q.UNREAD:this.$MercuryChannelHandler6(aa,ba);break;case q.READ_ALL:this.$MercuryChannelHandler9(aa,ba);break;case q.DELETE:this.$MercuryChannelHandler7(aa,ba);break;case q.DELETE_MESSAGES:this.$MercuryChannelHandler8(aa,ba);break;case q.TAG:this.$MercuryChannelHandlerc(aa,ba);break;case q.REPORT_SPAM:this.$MercuryChannelHandlerb(aa,ba);break;case q.READ_RECEIPT:this.$MercuryChannelHandlerf(aa,ba);break;case q.CHANGE_MUTE_SETTINGS:this.$MercuryChannelHandlerg(aa,ba);break;}};z.prototype.getRouting=function(){"use strict";return {mercury:this.__updateModelsFromMercuryPayload,messaging:this.__handleMessagingPayload,inbox:this.__markAsSeen};};z.prototype.__getMessagingPayloadType=function(){"use strict";return h.getArbiterType('messaging');};z.prototype.__getMercuryPayloadType=function(){"use strict";return h.getArbiterType('mercury');};z.prototype.__getInboxPayloadType=function(){"use strict";return h.getArbiterType('inbox');};z.prototype.$MercuryChannelHandler5=function(aa){"use strict";return (aa==this.__getMessagingPayloadType());};z.prototype.$MercuryChannelHandlere=function(aa){"use strict";return (aa==this.__getMercuryPayloadType());};z.prototype.$MercuryChannelHandlerd=function(aa){"use strict";return (aa==this.__getInboxPayloadType());};z.prototype.turnOn=function(){"use strict";if(!this.$MercuryChannelHandler3.length){var aa=this.getRouting();for(var ba in aa)this.$MercuryChannelHandler3.push(g.subscribe(h.getArbiterType(ba),aa[ba].bind(this)));}return this;};z.prototype.turnOff=function(){"use strict";if(this.$MercuryChannelHandler3.length){this.$MercuryChannelHandler3.forEach(g.unsubscribe);this.$MercuryChannelHandler3=[];}return this;};u(z,n);e.exports=z;},null);
__d("MercuryThreadSearchUtils",["escapeRegex","TokenizeUtil"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i={wordsInString:function(j){return (j||'').split(/\s+/).filter(function(k){return k.trim().length>0;});},anyMatchPredicate:function(j,k){for(var l=0;l<j.length;l++)if(k(j[l]))return true;return false;},allMatchPredicate:function(j,k){for(var l=0;l<j.length;l++)if(!k(j[l]))return false;return true;},queryWordMatchesAnyNameWord:function(j,k){var l=new RegExp('^'+g(j),'i');return this.anyMatchPredicate(k,function(m){var n=h.parse(m).flatValue;return l.test(n);});},queryMatchesName:function(j,k){var l=this.wordsInString(j),m=this.wordsInString(k);return this.allMatchPredicate(l,function(n){return this.queryWordMatchesAnyNameWord(n,m);}.bind(this));}};e.exports=i;},null);
__d("P2PCreditCardNumberFormField.react",["React","PaymentMethodUtils","P2PCreditCardFormFieldMixin.react","P2PCreditCardNumberFormFieldHelper","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();'use strict';var m=g.createClass({displayName:"P2PCreditCardFormField",mixins:[i],getIcon:function(){return (g.createElement("div",{className:"_31_w _3_2h"}));},getAutocompleteName:function(){return 'cc-number';},isAmex:function(n){var o=h.getCardType(n||this.state.value);return (o.name==='amex');},getLimit:function(){return this.isAmex()?15:16;},isValAtLimit:function(){var n=this.getLimit(),o=this.state.value.replace(/ /g,'');return o.length===n;},formatValue:function(n,o,p){var q=this.isAmex(n)?[0,4,10,15]:[0,4,8,12,16];return j.formatCardNumber(n,o,p,q,' ');},getUpdatedCursorPosition:function(n,o,p){return j.getUpdatedCursorPosition(n,o,p,' ');},getPlaceholder:function(){return l._("Card Number");},validate:function(n){var o=this.isValidCardType(n);this.setState({errorMessage:!o?l._("Please enter a Visa or MasterCard debit card to send or receive money"):null});return !!(h.isValidCCNumber(n)&&o);},isValidCardType:function(n){var o=['mc','visa','unknown'],p=h.getCardType(n),q=p?p.name:'',r=o.indexOf(q)>=0;return r;}});e.exports=m;},null);
__d("P2PCreditCardZipCodeFormField.react",["React","P2PCreditCardFormFieldMixin.react","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();'use strict';var k=g.createClass({displayName:"P2PCreditCardZipCodeFormField",mixins:[h],getIcon:function(){return (g.createElement("div",{className:"_31_w _3oce"}));},getAutocompleteName:function(){return 'postal-code';},isValAtLimit:function(){var l=this.state.value;return l.length===this.getLimit();},getLimit:function(){return 5;},getPlaceholder:function(){return j._("Billing ZIP Code");},formatValue:function(l,m,n){var o=this.getLimit();l=l.replace(/\D/g,'');l=l.slice(0,o);return l;},validate:function(l){return l.length===this.getLimit();}});e.exports=k;},null);
__d("LayerSlowlyFadeOnShow",["LayerFadeOnShow"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h=500,i=g.forDuration(h);e.exports=i;},null);
__d("P2PAcceptMoneyDialog.react",["CreditCardFormParam","CurrentEnvironment","Link.react","P2PCreditCardForm.react","P2PAPI","P2PAPIUtils","P2PChooseCreditCardForm.react","P2PCreditCard","P2PErrorDialog.react","P2PErrorNotice.react","P2PLinkConstants","P2PLoadingMask.react","P2PLogger","P2PPasswordProtectionNUXDialog.react","P2PPasswordProtectionStatusTypes","P2PPaymentLoggerEvent","P2PPaymentLoggerEventFlow","P2PSuccessDialog.react","P2PTransferParam","P2PVerifyCreditCardDialog.react","React","P2PButton.react","P2PDialog.react","P2PEditCreditCardDialog.react","PaymentsP2PCreditCardDialog.react","XUICloseButton.react","P2PDialogTitle.react","P2PDialogBody.react","P2PDialogFooter.react","P2PText.react","cx","emptyFunction","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma){b.__markCompiled&&b.__markCompiled();'use strict';var na=aa,oa=na.PropTypes,pa='fbP2PAcceptMoneyDialog_learnMoreSentenceID',qa=h.messengerdotcom,ra=aa.createClass({displayName:"P2PAcceptMoneyDialog",propTypes:{asyncRequestState:oa.object,creditCards:oa.arrayOf(oa.instanceOf(n)).isRequired,useRedesignForm:oa.bool,onClose:oa.func,transfer:oa.object},getDefaultProps:function(){return {asyncRequestState:{},onClose:la,creditCards:[],useRedesignForm:false};},getInitialState:function(){return {addCreditCardRequestID:'',isValid:false,declineErrorObject:null,editCreditCardDialogShown:false,formData:{},loading:false,passwordNUXPending:false,passwordProtectionNUXDialogShown:false,presetRequestID:'',presetSaveErrorObject:null,saveErrors:null,selectedCard:this.props.creditCards[0],showConfirmation:false,showDeclineConfirmation:false,showChooseCreditCardForm:this.props.creditCards.length>0,verifyCreditCardDialogShown:false};},log:function(sa,ta){s.log(sa,Object.assign({www_event_flow:w.UI_FLOW_P2P_RECEIVE,object_id:this.props.transfer[y.TRANSFER_ID]},ta));},componentWillMount:function(){this.log(v.UI_ACTN_INITIATE_ADD_CARD);},componentWillReceiveProps:function(sa){var ta=sa.asyncRequestState,ua=ta?ta[this.state.addCreditCardRequestID]:null,va=ta?ta[this.state.presetRequestID]:null;if(ua){this.setState({addCreditCardRequestID:''});if(ua.error){this.handleAcceptAddCardError(ua.error);}else this.handleAcceptAddCardSuccess(ua);}else if(va){this.setState({presetRequestID:''});if(va.error){this.handleUpdatePresetCreditCardError(va.error);}else this.handleUpdatePresetCreditCardSuccess(va);}},onBlur:function(){this.props.onClose();},handleAddCardBackButtonClick:function(){this.setState({isValid:false,formData:{},presetSaveErrorObject:null,saveErrors:null,showChooseCreditCardForm:true});},handleAcceptWithCardButtonClick:function(){this.initiateAcceptWithSelectedCard();},handleRedesignFormCancelClick:function(){if(this.props.creditCards.length!==0){this.handleAddCardBackButtonClick();}else this.onBlur();},initiateAcceptWithSelectedCard:function(){if(this.state.selectedCard.isExpired()){this.setState({editCreditCardDialogShown:true,verifyCreditCardDialogShown:false});this.log(v.UI_ACTN_EDIT_CARD);return;}else if(!this.state.selectedCard.getIsVerified()){this.setState({verifyCreditCardDialogShown:true,editCreditCardDialogShown:false});this.log(v.UI_ACTN_VERIFY_CSC);return;}this.acceptWithSelectedCard();},acceptWithSelectedCard:function(){this.setState({presetSaveErrorObject:null,loading:true});this.log(v.UI_ACTN_ACCEPT_WITH_CARD);this.updatePresetCreditCard(this.state.selectedCard.getCredentialId());},onVerifyCreditCardSuccess:function(){this.initiateAcceptWithSelectedCard();},onVerifyCreditCardCancel:function(){this.setState({verifyCreditCardDialogShown:false});},onEditCreditCardSuccess:function(){this.initiateAcceptWithSelectedCard();},onEditCreditCardCancel:function(){this.setState({editCreditCardDialogShown:false});},handleAddDebitCardOptionClicked:function(){this.setState({presetSaveErrorObject:null,showChooseCreditCardForm:false});},handleDeclineCardBackButtonClick:function(){this.setState({isValid:false,formData:{},presetSaveErrorObject:null,saveErrors:null,showDeclineConfirmation:false});},handleDeclineCardSubmitButtonClick:function(){var sa={};this.setState({loading:true,declineErrorObject:null});sa[y.TRANSFER_ID]=this.props.transfer[y.TRANSFER_ID];k.declineTransaction({formData:sa,success:this.handleDeclineSuccess,error:this.handleDeclineError});},handleDeclineSuccess:function(){this.props.onClose();},handleDeclineError:function(sa){this.setState({loading:false,declineErrorObject:sa});},handleNoDebitCardClick:function(){if(!this.state.loading)this.setState({showDeclineConfirmation:true});},handleAcceptAddCardClick:function(){var sa=l.genRequestID();this.setState({addCreditCardRequestID:sa,loading:true,presetSaveErrorObject:null,saveErrors:null});this.log(v.UI_ACTN_CONFIRM_CARD_DETAILS);k.addCreditCard(Object.assign({requestID:sa},this.state.formData));},handleAcceptAddCardSuccess:function(sa){this.updatePresetCreditCard(sa[g.CREDENTIAL_ID]);this.log(v.UI_ACTN_ADD_CARD_SUCCESS);},handleAcceptAddCardError:function(sa){this.setState({loading:false,saveErrors:sa});this.log(v.UI_ACTN_ADD_CARD_FAIL,{message:sa&&sa.general?sa.general.message:''});},updatePresetCreditCard:function(sa){var ta={},ua=l.genRequestID();ta[g.CREDENTIAL_ID]=sa;this.setState({presetRequestID:ua});k.updatePresetCreditCard(Object.assign({},ta,{requestID:ua}));},handleUpdatePresetCreditCardSuccess:function(sa){this.setState({loading:false,editCreditCardDialogShown:false,verifyCreditCardDialogShown:false,showConfirmation:true,passwordNUXPending:sa.passwordProtection===u.NOT_SET});},handleUpdatePresetCreditCardError:function(sa){this.setState({loading:false,presetSaveErrorObject:sa});},handleValidation:function(sa,ta){this.setState({isValid:sa,formData:ta});},handleConfirmationOKClick:function(){if(this.state.passwordNUXPending){this.setState({passwordNUXPending:false,passwordProtectionNUXDialogShown:true});}else this.props.onClose();},handleCloseButtonClick:function(){this.props.onClose();this.log(v.UI_ACTN_CANCEL_ADD_CARD);},handleErrorBackClick:function(){this.setState({declineErrorObject:null});},handleErrorOKClick:function(){this.setState({declineErrorObject:null});this.props.onClose();},handlePasswordProtectionNUXComplete:function(){this.setState({passwordProtectionNUXDialogShown:false});this.props.onClose();},handleCreditCardSelected:function(sa){this.setState({selectedCard:sa});},renderChooseCreditCardForm:function(){var sa,ta;if(!qa){sa=aa.createElement(fa,{onClick:this.handleCloseButtonClick});}else ta=aa.createElement(ba,{use:"default",size:"medium",label:ma._("Cancel"),disabled:this.state.loading,onClick:this.onBlur});return (aa.createElement("div",{className:"_2_t"},aa.createElement(ga,{showCloseButton:false},ma._("Select Debit Card"),sa),aa.createElement(ha,{className:"_2_u"},aa.createElement(ja,{type:"primary",className:"_2_w"},ma._("You can use a debit card you've already added to Facebook or add a new one.")),this.renderPresetError(),aa.createElement(m,{className:((!qa?"_2pij":'')),creditCards:this.props.creditCards,onAddDebitCardOptionSelected:this.handleAddDebitCardOptionClicked,onChange:this.handleCreditCardSelected,ref:"choose_credit_card_form",selectedCard:this.state.selectedCard,showAddDebitCardOption:true})),aa.createElement(ia,null,ta,aa.createElement(ba,{disabled:this.state.loading,label:ma._("Accept"),onClick:this.handleAcceptWithCardButtonClick,size:"medium",use:"confirm"}))));},renderPresetError:function(){var sa;if(this.state.presetSaveErrorObject)sa=aa.createElement(p,{error:this.state.presetSaveErrorObject});return sa;},renderDeclineLink:function(){if(this.props.creditCards.length!==0)return null;return (aa.createElement(ja,{type:"secondary"},aa.createElement(i,{href:"#",onClick:this.handleNoDebitCardClick},ma._("Decline Payment"))));},renderAcceptMoney:function(){var sa=this.props.transfer,ta,ua=aa.createElement(ba,{disabled:this.state.loading||!this.state.isValid,label:ma._("Accept"),onClick:this.handleAcceptAddCardClick,size:"medium",use:"confirm"}),va,wa,xa;if(!qa){wa=aa.createElement(fa,{onClick:this.handleCloseButtonClick});}else va=aa.createElement(ba,{use:"default",size:"medium",label:ma._("Cancel"),disabled:this.state.loading,onClick:this.onBlur});if(this.props.creditCards.length===0){xa=ma._("Add Debit Card");ta=aa.createElement(ia,{leftContent:this.renderDeclineLink()},va,ua);}else{xa=ma._("New Debit Card");ta=aa.createElement(ia,null,aa.createElement(ba,{disabled:this.state.loading,label:ma._("Back"),onClick:this.handleAddCardBackButtonClick,size:"medium",use:"default"}),ua);}return (aa.createElement("div",{className:"_1p_r"},aa.createElement(ga,{showCloseButton:false},xa,wa),aa.createElement(ha,null,aa.createElement(ja,{type:"primary",className:"_3-96"},ma._("{sender_name} sent you {currency}{amount}. Add a debit card to accept it.",[ma.param("sender_name",sa.sender.name),ma.param("currency",sa.currency),ma.param("amount",sa.amount)])),aa.createElement("div",{className:"_1p_w"},this.renderPresetError(),aa.createElement(j,{onValidation:this.handleValidation,saveErrors:this.state.saveErrors})),aa.createElement(ja,{id:pa,type:"secondary"},ma._("Your payment info is stored securely. {Link to P2P learn more page.}",[ma.param("Link to P2P learn more page.",aa.createElement(i,{"aria-describedby":pa,href:q.addDebitCardHelpURI,target:"_blank"},ma._("Learn more.")))]))),ta));},renderDeclineConfirmation:function(){var sa=this.props.transfer,ta;if(!qa)ta=aa.createElement(fa,{onClick:this.handleCloseButtonClick});return (aa.createElement("div",{className:"_301"},aa.createElement(ga,{showCloseButton:false},ma._("Decline Payment?"),ta),aa.createElement(ha,null,aa.createElement(ja,{type:"primary"},ma._("Declining this payment will send the money back to {friendName}.",[ma.param("friendName",sa.sender.name)]))),aa.createElement(ia,null,aa.createElement(ba,{disabled:this.state.loading,label:ma._("Back"),onClick:this.handleDeclineCardBackButtonClick,size:"medium",use:"default"}),aa.createElement(ba,{disabled:this.state.loading,label:ma._("Decline"),onClick:this.handleDeclineCardSubmitButtonClick,size:"medium",use:"default"}))));},render:function(){var sa,ta=qa?350:300;if(this.state.verifyCreditCardDialogShown){return (aa.createElement(z,{creditCard:this.state.selectedCard,asyncRequestState:this.props.asyncRequestState,isSending:false,onCancel:this.onVerifyCreditCardCancel,onSuccess:this.onVerifyCreditCardSuccess}));}else if(this.state.editCreditCardDialogShown){return (aa.createElement(da,{asyncRequestState:this.props.asyncRequestState,creditCard:this.state.selectedCard,onCancel:this.onEditCreditCardCancel,onSuccess:this.onEditCreditCardSuccess}));}else if(this.state.declineErrorObject){return (aa.createElement(o,{ref:"decline_error",allowBack:true,onBackClick:this.handleErrorBackClick,onOKClick:this.handleErrorOKClick,error:this.state.declineErrorObject,title:ma._("Problem Declining")}));}else if(this.state.passwordProtectionNUXDialogShown){return (aa.createElement(t,{onComplete:this.handlePasswordProtectionNUXComplete}));}else if(this.state.showConfirmation)return (aa.createElement(x,{onOKClick:this.handleConfirmationOKClick,title:ma._("Payment Received")},aa.createElement(ja,{type:"primary"},ma._("Money you receive from now on will automatically go on this card. You can update your card in {Link with text that goes to settings page}.",[ma.param("Link with text that goes to settings page",aa.createElement(i,{target:"_blank",href:q.settingsWWWURI},ma._("Payments Settings")))]))));if(this.state.showDeclineConfirmation){sa=this.renderDeclineConfirmation();}else if(this.state.showChooseCreditCardForm){sa=this.renderChooseCreditCardForm();}else if(this.props.useRedesignForm){return (aa.createElement(ea,{leftContent:this.renderDeclineLink(),onCancel:this.handleRedesignFormCancelClick,onSuccess:this.handleAcceptAddCardSuccess,asyncRequestState:this.props.asyncRequestState}));}else sa=this.renderAcceptMoney();return (aa.createElement(ca,{className:(("_309")+(qa?' '+"_5ktw":'')),layerHideOnBlur:false,ref:"dialog",repositionOnUpdate:true,shown:true,width:ta},sa,aa.createElement(r,{ref:"send_money_dialog_loader",visible:this.state.loading})));}});e.exports=ra;},null);
__d("ClearableTypeahead",["Event"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h={resetOnCloseButtonClick:function(i,j){g.listen(j,'click',function(){var k=i.getCore();k.getElement().focus();k.reset();});}};e.exports=h;},null);
__d("legacy:CompactTypeaheadRenderer",["CompactTypeaheadRenderer"],function(a,b,c,d){b.__markCompiled&&b.__markCompiled();if(!a.TypeaheadRenderers)a.TypeaheadRenderers={};a.TypeaheadRenderers.compact=b('CompactTypeaheadRenderer');},3);