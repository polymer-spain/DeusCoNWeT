!function(a){"use strict";var b=angular.module("picbit",["ngAnimate","ngResource","ngRoute","ngSanitize","ngTouch","ng-polymer-elements"]);b.config(["$locationProvider","$routeProvider","$httpProvider",function(a,b,c){c.defaults.withCredentials=!0,b.when("/",{templateUrl:"views/landingPage.html",controller:"LandingController"}).when("/user/:userId",{templateUrl:"views/userHome.html",controller:"UserHomeController",resolve:{auth:["$q","$cookie",function(a,b){var c=b.get("session");return c?a.when(c):a.reject({authenticated:!1})}]}}).when("/about",{templateUrl:"views/about.html",controller:"AboutController"}).when("/contact",{templateUrl:"views/contact.html",controller:"ContactController"}).when("/user/:userId/profile",{templateUrl:"views/profile.html",controller:"ProfileController",resolve:{auth:["$q","$cookie",function(a,b){var c=b.get("session");return c?a.when(c):a.reject({authenticated:!1})}]}}).when("/privacy",{templateUrl:"views/privacy.html",controller:"PrivacyController"}).when("/selectId",{templateUrl:"views/selectId.html",controller:"SelectidController",resolve:{auth:["$q","$rootScope",function(a,b){return b.register?a.when(b.register):a.reject({register:!1})}]}}).otherwise({redirectTo:"/"}),a.html5Mode(!0)}]),b.run(["$rootScope","$location",function(a,b){a.$on("$routeChangeError",function(a,c,d,e){e.authenticated?e.register||b.path("/"):b.path("/")})}])}(wrap(document));var picbit=angular.module("picbit");picbit.service("$backend",["$http","$location","$rootScope",function(a,b,c){"use strict";this.endpoint="https://"+b.host(),this.sendData=function(b,d,e,f,g){var h,i,j;return i=this.endpoint+"/api/oauth/"+f,j="token_id="+d+"&access_token="+b,j+=e?"&user_id="+e:"",j+=g&&"twitter"===f?"&oauth_verifier="+g:"",h={method:"post",url:i,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:j},c.promise=a(h),c.promise},this.getUserId=function(b,d,e){var f,g;return g=this.endpoint+"/api/oauth/"+d+"/"+b,f={methor:"get",url:g,headers:{"Content-Type":"application/x-www-form-urlencoded"}},c.promise=a(f),c.promise},this.getUser=function(b){var d,e;return e=this.endpoint+"/api/usuarios/"+b,d={method:"get",url:e,headers:{"Content-Type":"application/x-www-form-urlencoded"}},c.promise=a(d),c.promise},this.sendEmail=function(b,d,e){var f,g,h;return g=this.endpoint+"/api/contact",h="action=contact&message="+b+"&sender="+d,e&&(h+="&subject="+e),f={method:"post",url:g,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:h},c.promise=a(f),c.promise},this.sendSub=function(b,d,e){var f,g,h;return g=this.endpoint+"/api/subscriptions",h="name="+b+"&email="+d+"&surname="+e,f={method:"post",url:g,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:h},c.promise=a(f),c.promise},this.logout=function(){var b,d,e;return d=this.endpoint+"/api/oauth/googleplus",e="action=logout",b={method:"post",url:d,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:e},c.promise=a(b),c.promise}}]),picbit.service("$anchorSmoothScroll",function(){"use strict";this.scrollTo=function(a){function b(a){for(var b=document.getElementById(a),c=b.offsetTop,d=b;d.offsetParent&&d.offsetParent!=document.body;)d=d.offsetParent,c+=d.offsetTop;return c}var c=nonocurrentYPosition(),d=b(a),e=d>c?d-c:c-d;if(100>e)return void scrollTo(0,d);var f=Math.round(e/100);f=25;var g=Math.round(e/25),h=d>c?c+g:c-g,i=0;if(d>c)for(var j=c;d>j;j+=g)setTimeout("window.scrollTo(0, "+h+")",i*f),h+=g,h>d&&(h=d),i++;else for(var j=c;j>d;j-=g)setTimeout("window.scrollTo(0, "+h+")",i*f),h-=g,d>h&&(h=d),i++}}),picbit.service("$cookie",function(){this.get=function(a){var b="; "+document.cookie,c=b.split("; "+a+"=");return 2==c.length?c.pop().split(";").shift():void 0},this.put=function(a,b,c,d,e,f){var g;g=a+"="+b,c&&(g+="; expires="+c),d&&(g+="; path="+d),e&&(g+="; domain="+e),f&&(g+="; secure"),document.cookie=g},this["delete"]=function(a){document.cookie=a+"=; expires= Thu, 01 jan 1970 00:00:00 UTC"},this.set=function(a,b,c,d,e,f){this.put(a,b,c,d,e,f)},this.getAll=function(){return document.cookie}}),angular.module("picbit").controller("MainController",["$scope","$location","$timeout","$backend","$http","$window","$cookie","$rootScope",function(a,b,c,d,e,f,g,h){"use strict";a.status=void 0!==g.get("session"),a.domain="https://"+b.host(),a.shadow=!1,a.sended=!1,a.idioma=g.get("language")||f.navigator.language,a.user={name:"a",id:"2312"},a.changelanguage=function(b){var c;a.idioma=b,g.put("language",b),c="es"===a.idioma?"es_es.json":"en_en.json",e.get("../../language/"+c).success(function(b){a.language=b,a.language_selected=b.lang[a.idioma],document.querySelector("#language").$.label.innerHTML=a.language_selected}).error(function(a,b){console.error(a,b)})},"es"===a.idioma?e.get("../../language/es_es.json").success(function(b){a.language=b,a.idioma="es",g.put("language","es"),a.language_selected=b.lang[a.idioma]}).error(function(a,b){console.error(a,b)}):e.get("../../language/en_en.json").success(function(b){a.language=b,a.idioma="en",g.put("language","en"),a.language_selected=b.lang[a.idioma]}).error(function(a,b){console.error(a,b)}),a.logged=function(c){a.$apply(function(){if(a.hidePopup(),"twitter"===c.detail.redSocial)-1===b.$$path.indexOf("profile")&&a.changeView("/user/"+c.detail.redSocial+"_"+c.detail.userId);else if("googleplus"===c.detail.redSocial){var f;f="https://www.googleapis.com/plus/v1/people/me?access_token="+c.detail.token,e.get(f).success(function(e){if(-1===b.$$path.indexOf("profile")){var f=e.id;d.getUserId(f,c.detail.redSocial).then(function(b,e){d.getUser(b.user_id).then(function(a,b){h.user=a}),a.logOutButton(),a.changeView("/user/"+b.user_id),d.sendData(c.detail.token,f,c.detail.redSocial)},function(){h.register={token:c.detail.token,redSocial:c.detail.redSocial,token_id:f},a.changeView("/selectId")})}else d.sendData(c.detail.token,e.id,c.detail.redSocial)})}else if(-1===b.$$path.indexOf("profile")){var g=c.detail.userId;d.getUserId(g,c.detail.redSocial).then(function(b,e){d.getUser(b.user_id).then(function(a,b){h.user=a}),a.logOutButton(),a.changeView("/user/"+b.user_id),d.sendData(c.detail.token,g,c.detail.redSocial)},function(){h.register={token:c.detail.token,redSocial:c.detail.redSocial,token_id:g},a.changeView("/selectId")})}else d.sendData(c.detail.token,data.id,c.detail.redSocial)})},a.logOutButton=function(){document.querySelector("#nameId");a.status=!0},a.changeView=function(a){b.hash(""),b.path(a)},a.logout=function(){a.changeView("/"),a.status=!1},a.showPopup=function(){a.status?a.changeView("user/213"):(a.popup=!0,a.shadow=!0)},a.hidePopup=function(){a.popup=!1,a.shadow=!1},window.addEventListener("scroll",function(b,c,d){a.$apply(function(){var b=document.body.scrollTop;console.log(document.body.scrollTop),a.scrolled=b>0})}),g.get("session")&&a.logOutButton(),a.dropmenu=function(){document.querySelector("#dropmenu").toggle()},document.querySelector("body").addEventListener("google-logged",a.logged),document.querySelector("body").addEventListener("linkedin-logged",a.logged),document.querySelector("body").addEventListener("github-logged",a.logged),document.querySelector("body").addEventListener("instagram-logged",a.logged),document.querySelector("body").addEventListener("twitter-logged",a.logged),document.querySelector("body").addEventListener("facebook-logged",a.logged),document.querySelector("body").addEventListener("sof-logged",a.logged),a.popup=!1}]),angular.module("picbit").controller("LandingController",["$scope","$timeout","$location","$anchorSmoothScroll","$anchorScroll","$backend",function(a,b,c,d,e,f){"use strict";"section1"===c.hash()?a.selected=1:"section2"===c.hash()?a.selected=2:"section3"===c.hash()?a.selected=3:"section4"===c.hash()?a.selected=4:a.selected=1,a.cambiarAnchor=function(a){c.hash(a),d.scrollTo(a)},a["goto"]=function(b){a.selected=b,c.hash("section"+b),e()},a.setStyle=function(a,b){document.querySelector(a).removeAttribute("selected"),document.querySelector(b).setAttribute("selected",!0)},a.sub=function(){var b,c,d,e;if(b=document.querySelector("#namesus"),c=document.querySelector("#sendersus"),d=document.querySelector("#surnamesus"),e=document.querySelector("#invalid"),e.innerHTML="",b.value||(e.innerHTML="* El nombre es obligatorio"),d.value||(e.innerHTML&&(e.innerHTML+="<br>"),e.innerHTML+="* El apellido es obligatorio"),c.value&&c.checkValidity()||(e.innerHTML&&(e.innerHTML+="<br>"),e.innerHTML+="* El correo debe ser valido"),b.value&&c.checkValidity()&&d.value){var g,h;g=function(f,g){201===g?(b.value="",c.value="",d.value="",a.$parent.shadow=!0,a.$parent.sended=!0):200===g&&(e.innerHTML="* Ya esta registrado para la beta",b.value="",c.value="",d.value="")},h=function(){e.innerHTML="* Ahora mismo no podemos tratar su petición, intentelo mas tarde"},f.sendSub(b.value,c.value,d.value,g,h)}},a.wheel=function(b){document.onmousewheel="",a.$apply(function(){b.preventDefault();var c;c=b.wheelDelta<0?1:-1,1===a.selected&&b.wheelDelta<0?(a.selected+=c,a.cambiarAnchor("section2")):2===a.selected?(a.selected+=c,a.cambiarAnchor("section"+a.selected)):3===a.selected?(a.selected+=c,a.cambiarAnchor("section"+a.selected)):4===a.selected&&b.wheelDelta>0&&(a.selected+=c,a.cambiarAnchor("section3")),document.onmousewheel=a.wheel})},a.closeSended=function(){a.$parent.shadow=!1,a.$parent.sended=!1,a["goto"](1)},a.setSelected=function(b){a.selected=b,a.cambiarAnchor("section"+b)},a.isSelected=function(b){return a.selected===b}}]),angular.module("picbit").controller("UserHomeController",["$scope","$timeout",function(a,b){"use strict";a.list=[{name:"John"},{name:"Jessie"},{name:"Johanna"},{name:"Joy"},{name:"Mary"},{name:"Peter"},{name:"Sebastian"},{name:"Erika"},{name:"Patrick"},{name:"Samantha"}],a.twitter={},a.github={},a.twitter.token="3072043347-hbcrkzLJfVzTg7BTjgzkKqZx3bbzpYb04IO573x",a.github.username="mortega5",a.menuStatus=!1,a.showElement=!1,a.listaOpciones=["false","false","false"],a.showMenu=function(){a.menuStatus?(document.querySelector("#menu-icon").icon="arrow-back",a.menuStatus=!1,a.showElement=!1,a.selected="",a.showSingle="",a.listaOpciones=["false","false","false"]):(document.querySelector("#menu-icon").icon="arrow-forward",a.menuStatus=!0,b(function(){a.showElement=!0},350))},a.setList=function(b){switch(b){case"add":a.listaOpciones=[!a.listaOpciones[0],"false","false"],a.listaOpciones[0]?document.querySelector("#arrowAdd").icon="arrow-drop-down":document.querySelector("#arrowAdd").icon="arrow-drop-up";break;case"delete":a.listaOpciones=["false",!a.listaOpciones[1],"false"],a.listaOpciones[1]?document.querySelector("#arrowDelete").icon="arrow-drop-down":document.querySelector("#arrowDelete").icon="arrow-drop-up";break;case"modify":a.listaOpciones=["false","false",!a.listaOpciones[2]],a.listaOpciones[2]?document.querySelector("#arrowModify").icon="arrow-drop-down":document.querySelector("#arrowModify").icon="arrow-drop-up"}},a.hidelist=function(b){switch(b){case"add":return a.listaOpciones[0];case"delete":return a.listaOpciones[1];case"modify":return a.listaOpciones[2];default:return!1}},a.isSelected=function(b){return a.selected===b&&void 0!=b},a.setSelected=function(c){a.selected===c?(a.selected="",a.showSingle="",a.hidelist(c)||a.setList(c)):(a.selected=c,b(function(){a.showSingle=c},350))},a.isMenuHidden=function(b){return!(a.menuStatus|a.isSelected(b))}}]),angular.module("picbit").controller("AboutController",["$scope","$roouteParams","$timeout",function(a,b,c){}]),angular.module("picbit").controller("ContactController",["$scope","$backend",function(a,b){"use strict";a.sendEmail=function(){var a,c,d,e;if(a=document.querySelector("#message"),c=document.querySelector("#sender"),d=document.querySelector("#subject"),e=document.querySelector("#invalid"),e.innerHTML="",a.value||(e.innerHTML="*El mensaje no debe estar vacio"),c.value&&c.checkValidity()||(e.innerHTML+="<br>*El email debe ser válido"),a.value&&c.checkValidity()&&c.value){var f=function(){a.value="",c.value="",d.value=""};b.sendEmail(a.value,c.value,d.value,f)}}}]),angular.module("picbit").controller("ProfileController",["$scope",function(a){"user strict";a.calC=function(){document.getElementById("nombre").value,document.getElementById("apellido").value,document.getElementById("sender").value},a.takeInfoLog=function(a){if("googleplus"===a.detail.redSocial){a.detail.token}if("facebook"===a.detail.redSocial){a.detail.token,a.detail.userId}if("github"===a.detail.redSocial){a.detail.token}if("linkedin"===a.detail.redSocial){a.detail.token,a.detail.userId}if("instagram"===a.detail.redSocial){a.detail.token,a.detail.userId}if("twitter"===a.detail.redSocial){a.detail.token}},a.sort=!0}]),angular.module("picbit").controller("PrivacyController",["$scope","$roouteParams","$timeout",function(a,b,c){"use strict";a.mailTo=function(){var a="mailto:deus@conwet.com?cc=deus@conwet.com&subject=beta&body="+document.querySelector("#mensaje").value;window.location.href=a}}]),angular.module("picbit").controller("SelectidController",["$scope","$backend","$rootScope",function(a,b,c){"use strict";a.sendUsername=function(d,e){var f;f=function(){a.changeView("/profile/")},("click"===d.type||"keyup"===d.type&&13===d.which)&&e&&b.getUser(e).then(function(){},function(){b.sendData(c.register.token,c.register.token_id,e,c.register.redSocial),a.logOutButton(),a.changeView("/user/"+e)})}}]);